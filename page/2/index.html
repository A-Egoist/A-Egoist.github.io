<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>A-Egoist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="树深时见鹿, 溪午不闻钟。">
<meta property="og:type" content="website">
<meta property="og:title" content="A-Egoist">
<meta property="og:url" content="http://a-egoist.com/page/2/index.html">
<meta property="og:site_name" content="A-Egoist">
<meta property="og:description" content="树深时见鹿, 溪午不闻钟。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Amonologue">
<meta property="article:tag" content="算法，美化，日常，随笔">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="A-Egoist" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">A-Egoist</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://a-egoist.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-豆瓣爬取实战" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/187a0336/" class="article-date">
  <time datetime="2021-03-18T10:35:34.000Z" itemprop="datePublished">2021-03-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>►<a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%88%AC%E8%99%AB/">爬虫</a>►<a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%88%AC%E8%99%AB/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/187a0336/">爬虫实战——豆瓣电影Top250</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="爬虫实战——豆瓣电影Top250"><a href="#爬虫实战——豆瓣电影Top250" class="headerlink" title="爬虫实战——豆瓣电影Top250"></a>爬虫实战——豆瓣电影Top250</h2><h3 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段"></a>准备阶段</h3><h4 id="网页分析"><a href="#网页分析" class="headerlink" title="网页分析"></a>网页分析</h4><p>在目标网页直接<code>ctrl</code>+<code>u</code>查看网页源代码(或者<code>F12</code>审查)，豆瓣的网页源代码就出现了(非常友好)：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ua-windows ua-webkit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;renderer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;webkit&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;referrer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;always&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;google-site-verification&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ok0wCgT20tBBgo9_zat2iAcimtN4Ftf5ccsh092Xeyw&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span></span><br><span class="line">豆瓣电影 Top 250</span><br><span class="line"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;baidu-site-verification&quot;</span> <span class="attr">content</span>=<span class="string">&quot;cZdR4xxR7RxmM4zE&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Pragma&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-cache&quot;</span>&gt;</span></span><br><span class="line">    ......</span><br></pre></td></tr></table></figure>

<p>然后我们翻到330行左右的位置，有如下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;grid_view&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/subject/1292052/&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;肖申克的救赎&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://img2.doubanio.com/view/photo/s_ratio_poster/public/p480747492.webp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hd&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/subject/1292052/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>肖申克的救赎<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>The Shawshank Redemption<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;other&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>月黑高飞(港)  /  刺激1995(台)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;playable&quot;</span>&gt;</span>[可播放]<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bd&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                            导演: 弗兰克·德拉邦特 Frank Darabont<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>主演: 蒂姆·罗宾斯 Tim Robbins /...<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                            1994<span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>美国<span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>犯罪 剧情</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;star&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;rating5-t&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;rating_num&quot;</span> <span class="attr">property</span>=<span class="string">&quot;v:average&quot;</span>&gt;</span>9.7<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">property</span>=<span class="string">&quot;v:best&quot;</span> <span class="attr">content</span>=<span class="string">&quot;10.0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span>&gt;</span>2304569人评价<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;quote&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;inq&quot;</span>&gt;</span>希望让人自由。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;gact&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/wish/224683240/update?add=1292052&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">class</span>=<span class="string">&quot;j a_collect_btn&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sbtn-1292052-wish&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;nofollow&quot;</span>&gt;</span>想看<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;gact&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/collection/224683240/update?add=1292052&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">class</span>=<span class="string">&quot;j a_collect_btn&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sbtn-1292052-collection&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;nofollow&quot;</span>&gt;</span>看过<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/subject/1291546/&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;霸王别姬&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2561716440.webp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hd&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/subject/1291546/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>霸王别姬<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;other&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>再见，我的妾  /  Farewell My Concubine<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;playable&quot;</span>&gt;</span>[可播放]<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bd&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                            导演: 陈凯歌 Kaige Chen<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>主演: 张国荣 Leslie Cheung / 张丰毅 Fengyi Zha...<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                            1993<span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>中国大陆 中国香港<span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>剧情 爱情 同性</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;star&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;rating5-t&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;rating_num&quot;</span> <span class="attr">property</span>=<span class="string">&quot;v:average&quot;</span>&gt;</span>9.6<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">property</span>=<span class="string">&quot;v:best&quot;</span> <span class="attr">content</span>=<span class="string">&quot;10.0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span>&gt;</span>1709666人评价<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;quote&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;inq&quot;</span>&gt;</span>风华绝代。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>从这些代码中我们可以发现我们需要爬取的内容都在里面了。</p>
<p>现在我们来分析每一部电影的<code>HTML</code>语言，即从item项看：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/subject/1292052/&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;肖申克的救赎&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://img2.doubanio.com/view/photo/s_ratio_poster/public/p480747492.webp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hd&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/subject/1292052/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>肖申克的救赎<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>The Shawshank Redemption<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;other&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>月黑高飞(港)  /  刺激1995(台)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;playable&quot;</span>&gt;</span>[可播放]<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bd&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                            导演: 弗兰克·德拉邦特 Frank Darabont<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>主演: 蒂姆·罗宾斯 Tim Robbins /...<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                            1994<span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>美国<span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>犯罪 剧情</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;star&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;rating5-t&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;rating_num&quot;</span> <span class="attr">property</span>=<span class="string">&quot;v:average&quot;</span>&gt;</span>9.7<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">property</span>=<span class="string">&quot;v:best&quot;</span> <span class="attr">content</span>=<span class="string">&quot;10.0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span>&gt;</span>2304569人评价<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;quote&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;inq&quot;</span>&gt;</span>希望让人自由。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;gact&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/wish/224683240/update?add=1292052&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">class</span>=<span class="string">&quot;j a_collect_btn&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sbtn-1292052-wish&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;nofollow&quot;</span>&gt;</span>想看<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;gact&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/collection/224683240/update?add=1292052&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">class</span>=<span class="string">&quot;j a_collect_btn&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sbtn-1292052-collection&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;nofollow&quot;</span>&gt;</span>看过<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>从《肖申克的救赎》这部电影对应的<code>HTML</code>代码我们可以发现，我们需要提取的内容为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://movie.douban.com/subject/1292052/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>肖申克的救赎<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>The Shawshank Redemption<span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;other&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>/<span class="symbol">&amp;nbsp;</span>月黑高飞(港)  /  刺激1995(台)<span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;rating_num&quot;</span> <span class="attr">property</span>=<span class="string">&quot;v:average&quot;</span>&gt;</span>9.7<span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;inq&quot;</span>&gt;</span>希望让人自由。<span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br></pre></td></tr></table></figure>

<p>分析到这我们就可以确定我们的代码实现思路了。</p>
<h4 id="确定思路"><a href="#确定思路" class="headerlink" title="确定思路"></a>确定思路</h4><p>1、确定网页的<code>url</code>，即：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">start_url = <span class="string">&#x27;https://movie.douban.com/top250?start=&#123;:d&#125;&amp;filter=&#x27;</span></span><br><span class="line">size = <span class="number">10</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">    url = start_url.<span class="built_in">format</span>(i * <span class="number">25</span>)  <span class="comment"># url便是每一页对应的网页链接</span></span><br></pre></td></tr></table></figure>

<p>2、获取到对应的网页，即通过<code>requests.get()</code>方法，即</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.62 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">html = requests.get(url, headers=headers)</span><br></pre></td></tr></table></figure>

<p>爬取网页的时候可能会出现错误，我们要确保传递给下一个过程的数据没有错误，因此：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> html.status_code == <span class="number">200</span>:</span><br><span class="line">    <span class="comment"># 继续下一步操作</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;error!!!&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>3、通过<code>get()</code>方法获取网页代码有时我们无法直接处理，因此我们需要用的<code>beautifulSoup</code>来解析网页(虽然这一次根本不需要)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(html.text, <span class="string">&#x27;html.parser&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>4、经过前面的步骤我们就可以开始利用正则表达式来进行数据清洗了，因为之前我们已经确定了需求，所以现在我们按照之前的需求来一次完成我们的目标</p>
<p>4.1 匹配<code>url</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res = <span class="string">r&#x27;^[\[a-z&lt;=&quot;\s]*href=&quot;(.*)&quot;&gt;$&#x27;</span></span><br><span class="line"><span class="keyword">if</span> re.match(res, test):</span><br><span class="line">    url = re.match(res, test).group(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    url = <span class="string">&#x27;None&#x27;</span></span><br></pre></td></tr></table></figure>

<p>4.2 匹配名称</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res = <span class="string">r&#x27;^[&lt;a-z\s=&quot;&gt;]*&gt;(.*)&lt;/span&gt;$&#x27;</span></span><br><span class="line"><span class="keyword">if</span> re.match(res, test):</span><br><span class="line">    movie_name = re.match(res, test).group(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    movie_name = <span class="string">&#x27;None&#x27;</span></span><br></pre></td></tr></table></figure>

<p>4.3 匹配评分</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res = <span class="string">r&#x27;^[\[=a-z&quot;&lt;&gt;\s:_]*(.*)&lt;/span&gt;]$&#x27;</span></span><br><span class="line"><span class="keyword">if</span> re.match(res, test):</span><br><span class="line">    rating = re.match(res, test).group(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    rating = <span class="string">&#x27;None&#x27;</span></span><br></pre></td></tr></table></figure>

<p>4.4 匹配推荐语</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res = <span class="string">r&#x27;^[\[=a-z&quot;&lt;&gt;\s]*(.*)&lt;/span&gt;]$&#x27;</span>]</span><br><span class="line"><span class="keyword">if</span> re.match(res, test):</span><br><span class="line">    inq = re.match(res, test).group(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    inq = <span class="string">&#x27;None&#x27;</span></span><br></pre></td></tr></table></figure>

<p>5、经过前面的步骤，我们就可以在从程序输出得到爬取的，但是为了方便阅读和保存，我们需要把爬取结果保存下来，为了方便，直接保存为CSV格式的文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;res.csv&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    writer = csv.writer(f)</span><br><span class="line">    writer.writerow([<span class="string">&#x27;电影名&#x27;</span>, <span class="string">&#x27;评分&#x27;</span>, <span class="string">&#x27;推荐语&#x27;</span>, <span class="string">&#x27;链接&#x27;</span>])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">        writer.writerow(i)</span><br></pre></td></tr></table></figure>

<h3 id="实施阶段"><a href="#实施阶段" class="headerlink" title="实施阶段"></a>实施阶段</h3><p>在准备阶段我们已经确定了整个爬取流程，接下来就作为一个无情的代码机器就行了</p>
<p>1、编写<code>getHtmlDiv(url)</code>函数，用于爬取网页并解析得到<code>div</code>标签中的结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHtmlDiv</span>(<span class="params">url</span>):</span></span><br><span class="line">    headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.62 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">    html = requests.get(url, headers=headers)</span><br><span class="line">    <span class="keyword">if</span> html.status_code == <span class="number">200</span>:</span><br><span class="line">        soup = BeautifulSoup(html.text, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> soup.find_all(name=<span class="string">&#x27;div&#x27;</span>, class_=<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(html.status_code)</span><br></pre></td></tr></table></figure>

<p>2、编写<code>writeToCSV(res, filename)</code>函数，将爬取结果保存</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">writeToCSV</span>(<span class="params">res, filename</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        writer = csv.writer(f)</span><br><span class="line">        writer.writerow([<span class="string">&#x27;电影名&#x27;</span>, <span class="string">&#x27;评分&#x27;</span>, <span class="string">&#x27;推荐语&#x27;</span>, <span class="string">&#x27;链接&#x27;</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">            writer.writerow(i)</span><br></pre></td></tr></table></figure>

<p>3、编写<code>getRes(ans, url)</code>函数，从<code>div</code>标签中的到我们需要的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getRes</span>(<span class="params">ans, url</span>):</span></span><br><span class="line">    div = getHtmlDiv(url)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(div)):</span><br><span class="line">        s_url = <span class="built_in">str</span>(div[i].find_all(name=<span class="string">&#x27;a&#x27;</span>)).split(<span class="string">&#x27;\n&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        res_url = <span class="string">r&#x27;^[\[a-z&lt;=&quot;\s]*href=&quot;(.*)&quot;&gt;$&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> re.match(res_url, s_url):</span><br><span class="line">            movie_url = re.match(res_url, s_url).group(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            movie_url = <span class="string">&quot;None&quot;</span></span><br><span class="line"></span><br><span class="line">        s_title_span = div[i].find_all(name=<span class="string">&#x27;span&#x27;</span>, class_=<span class="string">&#x27;title&#x27;</span>) + div[i].find_all(name=<span class="string">&#x27;span&#x27;</span>,class_=<span class="string">&#x27;other&#x27;</span>)</span><br><span class="line">        res_title = <span class="string">r&#x27;^[&lt;a-z\s=&quot;&gt;]*&gt;(.*)&lt;/span&gt;$&#x27;</span></span><br><span class="line">        movie_name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s_title_span)):</span><br><span class="line">            <span class="keyword">if</span> re.match(res_title, <span class="built_in">str</span>(s_title_span[j])):</span><br><span class="line">                m = re.match(res_title, <span class="built_in">str</span>(s_title_span[j])).group(<span class="number">1</span>)</span><br><span class="line">                m = <span class="string">&#x27;&#x27;</span>.join(m.split())</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                m = <span class="string">&quot;None&quot;</span></span><br><span class="line">            movie_name += m</span><br><span class="line"></span><br><span class="line">        s_rating = <span class="built_in">str</span>(div[i].find_all(name=<span class="string">&#x27;span&#x27;</span>, class_=<span class="string">&#x27;rating_num&#x27;</span>))</span><br><span class="line">        res_rating = <span class="string">r&#x27;^[\[=a-z&quot;&lt;&gt;\s:_]*(.*)&lt;/span&gt;]$&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> re.match(res_rating, s_rating):</span><br><span class="line">            movie_rating = re.match(res_rating, s_rating).group(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            movie_rating = <span class="string">&quot;None&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        s_inq = <span class="built_in">str</span>(div[i].find_all(name=<span class="string">&#x27;span&#x27;</span>, class_=<span class="string">&#x27;inq&#x27;</span>))</span><br><span class="line">        res_inq = <span class="string">r&#x27;^[\[=a-z&quot;&lt;&gt;\s]*(.*)&lt;/span&gt;]$&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> re.match(res_inq, s_inq):</span><br><span class="line">            movie_inq = re.match(res_inq, s_inq).group(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            movie_inq = <span class="string">&quot;None&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        item = (movie_name, movie_rating, movie_inq, movie_url)</span><br><span class="line">        ans.append(item)</span><br><span class="line">    <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>

<p>4、编写<code>main()</code>函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    start_url = <span class="string">&quot;https://movie.douban.com/top250?start=&#123;:d&#125;&amp;filter=&quot;</span></span><br><span class="line">    size = <span class="number">10</span></span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            url = start_url.<span class="built_in">format</span>(i * <span class="number">25</span>)</span><br><span class="line">            res = getRes(res, url)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;main() error! i = %d&quot;</span> % i)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    writeToCSV(res, <span class="string">&#x27;test.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="查看结果"><a href="#查看结果" class="headerlink" title="查看结果"></a>查看<a target="_blank" rel="noopener" href="https://gitee.com/A-Egoist/A-Egoist.gitee.io/blob/master/Main.py">结果</a></h3><p>在代码所在的文件夹中，我们就可以看到生成了一个<code>.csv</code>文件，在该文件中就保存了我们的爬取结果。</p>
<img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagesimage-20210313163530530.png" style="zoom:80%;" />




      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/187a0336/" data-id="ckw68jfm7002abgide0bda3by" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-哈夫曼树(最优二叉树)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/68a09d/" class="article-date">
  <time datetime="2020-06-22T03:35:27.000Z" itemprop="datePublished">2020-06-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/">数据结构及算法</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/68a09d/">哈夫曼树(最优二叉树)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="哈夫曼树-最优二叉树"><a href="#哈夫曼树-最优二叉树" class="headerlink" title="哈夫曼树(最优二叉树)"></a>哈夫曼树(最优二叉树)</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>​        利用一个字符串中符号的出现频率(即出现概率)作为输入，并差生编码这个字符串的一个前缀码作为输出，在这些符号的所有可能的二叉前缀码中，这个编码使用最少的位。</p>
<h2 id="构造"><a href="#构造" class="headerlink" title="构造"></a>构造</h2><p>1、根据给定的<strong>n</strong>个权值，构造n棵只有一个结点的二叉树，<strong>n</strong>个权值分别为这些树根结点的全。设森林<strong>F</strong>是由这<strong>n</strong>棵树构成的集合；(<strong>原始森林</strong>)</p>
<p>2、在<strong>F</strong>中选取两棵根的权值最小的树作为左、右子树，构造一棵新二叉树，置新二叉树的权值**=**左、右子树根结点权值之和；(<strong>每次新增一个结点</strong>)</p>
<p>3、从<strong>F</strong>中删除这两棵树，并将新树加入<strong>F</strong>；(<strong>每次少一棵树</strong>)</p>
<p>4、重复2、3，直到<strong>F</strong>中只含一棵树为止。(<strong>重复n-1次</strong>)</p>
<p>具体构造图示：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_29519041/article/details/81428934">链接</a></p>
<h2 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h2><p>定义结点类型</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> weight,parent,lchild,rchild;</span><br><span class="line">&#125;HTNode;</span><br></pre></td></tr></table></figure>

<p>构造算法</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreatHuffmanTree</span><span class="params">(HTNode *ht,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">1</span>)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> i,j,l,r,min_1,min_2;</span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">2</span>*n<span class="number">-1</span>;i++)ht[i].parent=ht[i].lchild=ht[i].rchild=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=n;i&lt;<span class="number">2</span>*n<span class="number">-1</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		min_1=min_2=<span class="number">9999999</span>;</span><br><span class="line">		l=r=<span class="number">-1</span>;</span><br><span class="line">        <span class="comment">//找到权值最小的两个结点</span></span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;i;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(ht[j].parent==<span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(ht[j].weight&lt;min_1)</span><br><span class="line">				&#123;</span><br><span class="line">					min_2=min_1;</span><br><span class="line">					r=l;</span><br><span class="line">					min_1=ht[j].weight;</span><br><span class="line">					l=j;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span>(ht[j].weight&lt;min_2)</span><br><span class="line">				&#123;</span><br><span class="line">					min_2=ht[j].weight;</span><br><span class="line">					r=j;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		ht[i].weight=ht[l].weight+ht[r].weight;</span><br><span class="line">		ht[l].parent=ht[r].parent=i;</span><br><span class="line">		ht[i].lchild=l;</span><br><span class="line">		ht[i].rchild=r;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagesQQ%E5%9B%BE%E7%89%8720200622113021.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/68a09d/" data-id="ckw68jflz001obgid0fi0cfyw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91/" rel="tag">树</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ACM Training Plan" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/5a52a5c2/" class="article-date">
  <time datetime="2020-04-09T07:58:31.000Z" itemprop="datePublished">2020-04-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ACM/">ACM</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/5a52a5c2/">ACM Training Plan</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-前言"><a href="#1-前言" class="headerlink" title="1 前言"></a>1 前言</h1><p>项目为<a target="_blank" rel="noopener" href="http://www.ituring.com.cn/book/1044">《挑战程序设计竞赛（第2版）》</a>习题册攻略，已完结。可配合书籍或笔记，系统学习算法。</p>
<ul>
<li>题量：约200道，代码注释内含详解。</li>
<li>难度：总体高于Leetcode，部分接近ACM。</li>
</ul>
<p><strong>该项目是我在GitHub上找到的习题目录，挂在博客上分享，并鞭策自己，加油！！！</strong></p>
<h1 id="1-1-题库来源"><a href="#1-1-题库来源" class="headerlink" title="1.1 题库来源"></a>1.1 题库来源</h1><ul>
<li>Google Code Jam（<a target="_blank" rel="noopener" href="https://code.google.com/codejam">GCJ</a>）</li>
<li>Peking University Online Judge（<a target="_blank" rel="noopener" href="http://poj.org/">POJ</a>）</li>
<li>Aizu Online Judge（<a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/index.jsp?lang=en">AOJ</a>）</li>
<li>UVa Online Judge（<a target="_blank" rel="noopener" href="https://uva.onlinejudge.org/">UVa</a>）</li>
<li>CodeForces（<a target="_blank" rel="noopener" href="http://codeforces.com/">CF</a>）</li>
</ul>
<h1 id="1-2-算法笔记"><a href="#1-2-算法笔记" class="headerlink" title="1.2 算法笔记"></a>1.2 算法笔记</h1><ul>
<li><a target="_blank" rel="noopener" href="http://jennica.space/2016/10/14/acm-challenge-easy/">初级篇</a></li>
<li><a target="_blank" rel="noopener" href="http://jennica.space/2016/11/16/acm-challenge-medium/">中级篇</a></li>
<li><a target="_blank" rel="noopener" href="http://jennica.space/2016/11/30/acm-challenge-hard/">高级篇</a></li>
</ul>
<h1 id="1-3-题库目录"><a href="#1-3-题库目录" class="headerlink" title="1.3 题库目录"></a>1.3 题库目录</h1><ul>
<li><p>初级：<br><a href="#21-%E7%A9%B7%E7%AB%AD%E6%90%9C%E7%B4%A2">穷竭搜索</a>、<br><a href="#22-%E8%B4%AA%E5%BF%83%E6%B3%95">贪心法</a>、<br><a href="#23-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92">动态规划</a>、<br><a href="#24-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">数据结构</a>、<br><a href="#25-%E5%9B%BE%E8%AE%BA">图论</a>、<br><a href="#26-%E6%95%B0%E8%AE%BA">数论</a></p>
</li>
<li><p>中级：<br><a href="#31-%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2">二分搜索</a>、<br><a href="#32-%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7">常用技巧</a>、<br><a href="#33-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BA%8C">数据结构（二）</a>、<br><a href="#34-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%BA%8C">动态规划（二）</a>、<br><a href="#35-%E7%BD%91%E7%BB%9C%E6%B5%81">网络流</a>、<br><a href="#36-%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95">计算几何</a></p>
</li>
<li><p>高级：<br><a href="#41-%E6%95%B0%E8%AE%BA%E4%BA%8C">数论（二）</a>、<br><a href="#42-%E5%8D%9A%E5%BC%88%E8%AE%BA">博弈论</a>、<br><a href="#43-%E5%9B%BE%E8%AE%BA%E4%BA%8C">图论（二）</a>、<br><a href="#44-%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%E4%BA%8C">常用技巧（二）</a>、<br><a href="#45-%E6%99%BA%E6%85%A7%E6%90%9C%E7%B4%A2">智慧搜索</a>、<br><a href="#46-%E5%88%86%E6%B2%BB">分治</a>、<br><a href="#47-%E5%AD%97%E7%AC%A6%E4%B8%B2">字符串</a></p>
</li>
</ul>
<h1 id="2-初级算法"><a href="#2-初级算法" class="headerlink" title="2 初级算法"></a>2 初级算法</h1><h1 id="2-1-穷竭搜索"><a href="#2-1-穷竭搜索" class="headerlink" title="2.1 穷竭搜索"></a>2.1 穷竭搜索</h1><ul>
<li><p>深度优先搜索</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1979">POJ 1979: Red and Black</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0118">AOJ 0118: Property Distribution</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0033">AOJ 0033: Ball</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3009">POJ 3009: Curling 2.0</a></li>
</ul>
</li>
<li><p>宽度优先搜索</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0558">AOJ 0558: Cheese</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3669">POJ 3669: Meteor Shower</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0121">AOJ 0121: Seven Puzzle</a></li>
</ul>
</li>
<li><p>穷竭搜索</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2718">POJ 2718: Smallest Difference</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3187">POJ 3187: Backward Digit Sums</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3050">POJ 3050: Hopscotch</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0525">AOJ 0525: Osenbei</a></li>
</ul>
</li>
</ul>
<h1 id="2-2-贪心法"><a href="#2-2-贪心法" class="headerlink" title="2.2 贪心法"></a>2.2 贪心法</h1><ul>
<li>区间贪心<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2376">POJ 2376: Cleaning Shifts</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1328">POJ 1328: Radar Installation</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3190">POJ 3190: Stall Reservations</a></li>
</ul>
</li>
<li>其他贪心<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2393">POJ 2393: Yogurt factory</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1017">POJ 1017: Packets</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3040">POJ 3040; Allowance</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1862">POJ 1862: Stripies</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3262">POJ 3262: Protecting the Flowers</a></li>
</ul>
</li>
</ul>
<h1 id="2-3-动态规划"><a href="#2-3-动态规划" class="headerlink" title="2.3 动态规划"></a>2.3 动态规划</h1><ul>
<li><p>基础DP</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3176">POJ 3176: Cow Bowling</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2229">POJ 2229: Sumsets</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2385">POJ 2385: Apple Catching</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3616">POJ 3616: Milking Time</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3280">POJ 3280: Cheapest Palindrome</a></li>
</ul>
</li>
<li><p>优化递推式</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1742">POJ 1742: Coins</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3046">POJ 3046: Ant Counting</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3181">POJ 3181: Dollar Dayz</a></li>
</ul>
</li>
<li><p>进阶DP</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1065">POJ 1065: Wooden Sticks</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1631">POJ 1631: Bridging signals</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3666">POJ 3666: Making the Grade</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2392">POJ 2392: Space Elevator</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2184">POJ 2184: Cow Exhibition</a></li>
</ul>
</li>
</ul>
<h1 id="2-4-数据结构"><a href="#2-4-数据结构" class="headerlink" title="2.4 数据结构"></a>2.4 数据结构</h1><ul>
<li>优先队列<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3614">POJ 3614: Sunscreen</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2010">POJ 2010: Moo University - Financial Aid</a></li>
</ul>
</li>
<li>并查集<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2236">POJ 2236: Wireless Network</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1703">POJ 1703: Find them, Catch them</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2170">AOJ 2170: Marked Ancestor</a></li>
</ul>
</li>
</ul>
<h1 id="2-5-图论"><a href="#2-5-图论" class="headerlink" title="2.5 图论"></a>2.5 图论</h1><ul>
<li>最短路<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0189">AOJ 0189: Convenient Location</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2139">POJ 2139: Six Degrees of Cowvin Bacon</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3259">POJ 3259: Wormholes</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3268">POJ 3268: Silver Cow Party</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2249">AOJ 2249: Road Construction</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2200">AOJ 2200: Mr. Rito Post Office</a></li>
</ul>
</li>
<li>最小生成树<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1258">POJ 1258: Agri-Net</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2377">POJ 2377: Bad Cowtractors</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2224">AOJ 2224: Save Your Cats</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2395">POJ 2395: Out of Hay</a></li>
</ul>
</li>
</ul>
<h1 id="2-6-数论"><a href="#2-6-数论" class="headerlink" title="2.6 数论"></a>2.6 数论</h1><ul>
<li>辗转相除法<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0005">AOJ 0005: GCD and LCM</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2429">POJ 2429: GCD &amp; LCM Inverse</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1930">POJ 1930: Dead Fraction</a></li>
</ul>
</li>
<li>素数<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0009">AOJ 0009: Prime Number</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3126">POJ 3126: Prime Path</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3421">POJ 3421: X-factor Chains</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3292">POJ 3292: Semi-prime H-numbers</a></li>
</ul>
</li>
<li>快速幂<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3641">POJ 3641: Pseudoprime numbers</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1995">POJ 1995: Raising Modulo Numbers</a></li>
</ul>
</li>
</ul>
<h1 id="3-中级算法"><a href="#3-中级算法" class="headerlink" title="3 中级算法"></a>3 中级算法</h1><h1 id="3-1-二分搜索"><a href="#3-1-二分搜索" class="headerlink" title="3.1 二分搜索"></a>3.1 二分搜索</h1><ul>
<li><p>最大化最小值</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3258">POJ 3258: River Hopscotch</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3273">POJ 3273: Monthly Expense</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3104">POJ 3104: Drying</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3045">POJ 3045: Cow Acrobats</a></li>
</ul>
</li>
<li><p>01分数规划</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2976">POJ 2976: Dropping tests</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3111">POJ 3111: K Best</a></li>
</ul>
</li>
<li><p>第k大值</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3579">POJ 3579: Median</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3685">POJ 3685: Matrix</a></li>
</ul>
</li>
<li><p>最小化第k大值</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2010">POJ 2010: Moo University - Financial Aid</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3662">POJ 3662: Telephone Lines</a></li>
</ul>
</li>
<li><p>其他二分搜索</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1759">POJ 1759: Garland</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3484">POJ 3484: Showstopper</a></li>
</ul>
</li>
</ul>
<h1 id="3-2-常用技巧"><a href="#3-2-常用技巧" class="headerlink" title="3.2 常用技巧"></a>3.2 常用技巧</h1><ul>
<li><p>尺取法</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2566">POJ 2566: Bound Found</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2739">POJ 2739: Sum of Consecutive Prime Numbers</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2100">POJ 2100: Graveyard Design</a></li>
</ul>
</li>
<li><p>反转</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3185">POJ 3185: The Water Bowls</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1222">POJ 1222: EXTENDED LIGHTS OUT</a></li>
</ul>
</li>
<li><p>弹性碰撞</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2674">POJ 2674: Linear world</a></li>
</ul>
</li>
<li><p>折半枚举</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3977">POJ 3977: Subset</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2549">POJ 2549: Sumsets</a></li>
</ul>
</li>
<li><p>离散化</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0531">AOJ 0531: Paint Color</a></li>
</ul>
</li>
</ul>
<h1 id="3-3-数据结构（二）"><a href="#3-3-数据结构（二）" class="headerlink" title="3.3 数据结构（二）"></a>3.3 数据结构（二）</h1><ul>
<li><p>树状数组</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1990">POJ 1990: MooFest</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3109">POJ 3109: Inner Vertices</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2155">POJ 2155: Matrix</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2886">POJ 2886: Who Gets the Most Candies?</a></li>
</ul>
</li>
<li><p>线段树和平方分割</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3264">POJ 3264: Balanced Lineup</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3368">POJ 3368: Frequent values</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3470">POJ 3470: Walls</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1201">POJ 1201: Intervals</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=3141">UVa 11990: “Dynamic” Inversion</a></li>
</ul>
</li>
</ul>
<h1 id="3-4-动态规划（二）"><a href="#3-4-动态规划（二）" class="headerlink" title="3.4 动态规划（二）"></a>3.4 动态规划（二）</h1><ul>
<li><p>状态压缩DP</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2441">POJ 2441: Arrange the Bulls</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3254">POJ 3254: Corn Fields</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2836">POJ 2836: Rectangular Covering</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1795">POJ 1795: DNA Laboratory</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3411">POJ 3411: Paid Roads</a></li>
</ul>
</li>
<li><p>矩阵的幂</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3420">POJ 3420: Quad Tiling</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3735">POJ 3735: Training little cats</a></li>
</ul>
</li>
<li><p>数据结构与DP</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3171">POJ 3171: Cleaning Shifts</a></li>
</ul>
</li>
</ul>
<h1 id="3-5-网络流"><a href="#3-5-网络流" class="headerlink" title="3.5 网络流"></a>3.5 网络流</h1><ul>
<li>最大流与最小割<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3713">POJ 3713: Transferring Sylla</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2987">POJ 2987: Firing</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2914">POJ 2914: Minimum Cut</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3155">POJ 3155: Hard Life</a></li>
</ul>
</li>
<li>二分图匹配<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1274">POJ 1274: The Perfect Stall</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2112">POJ 2112: Optimal Milking</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1486">POJ 1486: Sorting Slides</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1466">POJ 1466: Girls and Boys</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3692">POJ 3692: Kindergarten</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2724">POJ 2724: Purifying Machine</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2226">POJ 2226: Muddy Fields</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2251">AOJ 2251: Merry Christmas</a></li>
</ul>
</li>
<li>最小费用流<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3068">POJ 3068: “Shortest” pair of paths</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2195">POJ 2195: Going Home</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3422">POJ 3422: Kaka’s Matrix Travels</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2266">AOJ 2266: Cache Strategy</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2230">AOJ 2230: How to Create a Good Game</a></li>
</ul>
</li>
</ul>
<h1 id="3-6-计算几何"><a href="#3-6-计算几何" class="headerlink" title="3.6 计算几何"></a>3.6 计算几何</h1><ul>
<li>极限<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1981">POJ 1981: Circle and Points</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1418">POJ 1418: Viva Confetti</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2201">AOJ 2201: Immortal Jewels</a></li>
</ul>
</li>
<li>平面扫描<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3168">POJ 3168: Barn Expansion</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3293">POJ 3293: Rectilinear polygon</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2482">POJ 2482: Stars in Your Window</a></li>
</ul>
</li>
</ul>
<h1 id="4-1-数论（二）"><a href="#4-1-数论（二）" class="headerlink" title="4.1 数论（二）"></a>4.1 数论（二）</h1><ul>
<li><p>模运算</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1150">POJ 1150: The Last Non-zero Digit</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1284">POJ 1284: Primitive Roots</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2115">POJ 2115: C Looooops</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3708">POJ 3708: Recurrent Function</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2720">POJ 2720: Last Digits</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://code.google.com/codejam/contest/dashboard?c=1363489#s=p1">GCJ 2011 Final B: Bacterial Reproduction</a></li>
</ul>
</li>
<li><p>矩阵</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2345">POJ 2345: Central heating</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3532">POJ 3532: Resistance</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3526">POJ 3526: The Teacher’s Side of Math</a></li>
</ul>
</li>
<li><p>计数</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2407">POJ 2407: Relatives</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1286">POJ 1286: Necklace of Beads</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2409">POJ 2409: Let it Bead</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2164">AOJ 2164: Revenge of the Round Table</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2214">AOJ 2214: Warp Hall</a></li>
</ul>
</li>
</ul>
<h1 id="4-2-博弈论"><a href="#4-2-博弈论" class="headerlink" title="4.2 博弈论"></a>4.2 博弈论</h1><ul>
<li><p>博弈DP</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1082">POJ 1082: Calendar Game</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2068">POJ 2068: Nim</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3688">POJ 3688: Cheat in the Game</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1740">POJ 1740: A New Stone Game</a></li>
</ul>
</li>
<li><p>Nim和Grundy数</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2975">POJ 2975: Nim</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3537">POJ 3537: Crosses and Crosses</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://codeforces.com/problemset/problem/138/D">CF 138D: World of Darkraft</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2315">POJ 2315: Football Game</a></li>
</ul>
</li>
</ul>
<h1 id="4-3-图论（二）"><a href="#4-3-图论（二）" class="headerlink" title="4.3 图论（二）"></a>4.3 图论（二）</h1><ul>
<li>强连通分量<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3180">POJ 3180: The Cow Prom</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1236">POJ 1236: Network of Schools</a></li>
</ul>
</li>
<li>2-SAT<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3678">POJ 3678: Katu Puzzle</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2723">POJ 2723: Get Luffy Out</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2749">POJ 2749: Building roads</a></li>
</ul>
</li>
<li>LCA<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1986">POJ 1986: Distance Queries</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3728">POJ 3728: The merchant</a></li>
</ul>
</li>
</ul>
<h1 id="4-4-常用技巧（二）"><a href="#4-4-常用技巧（二）" class="headerlink" title="4.4 常用技巧（二）"></a>4.4 常用技巧（二）</h1><ul>
<li>栈<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3250">POJ 3250: Bad Hair Day</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2082">POJ 2082: Terrible Sets</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3494">POJ 3494: Largest Submatrix of All 1’s</a></li>
</ul>
</li>
<li>双端队列<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2823">POJ 2823: Sliding Window</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3260">POJ 3260: The Fewest Coins</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1180">POJ 1180: Batch Scheduling</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1070">AOJ 1070: FIMO sequence</a></li>
</ul>
</li>
</ul>
<h1 id="4-5-智慧搜索"><a href="#4-5-智慧搜索" class="headerlink" title="4.5 智慧搜索"></a>4.5 智慧搜索</h1><ul>
<li>剪枝<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1011">POJ 1011: Sticks</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2046">POJ 2046: Gap</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3134">POJ 3134: Power Calculus</a></li>
</ul>
</li>
<li>A*与IDA*<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3523">POJ 3523: The Morning after Halloween</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2032">POJ 2032: Square Carpets</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=13&page=show_problem&problem=1122">UVa 10181: 15-Puzzle Problem</a></li>
</ul>
</li>
</ul>
<h1 id="4-6-分治"><a href="#4-6-分治" class="headerlink" title="4.6 分治"></a>4.6 分治</h1><ul>
<li><p>数列分治</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1854">POJ 1854: Evil Straw Warts Live</a></li>
</ul>
</li>
<li><p>平面分治</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://code.google.com/codejam/contest/dashboard?c=311101#s=p1">GCJ 2009 Final B: Min Perimeter</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://codeforces.com/problemset/problem/97/B">CF 97B: Superset</a></li>
</ul>
</li>
<li><p>树分治</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=2114">POJ 2114: Boatherds</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&category=243&problem=3313">UVa 12161: Ironman Race in Treeland</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://www.spoj.com/problems/QTREE5/">SPOJ 2939: Query on a tree V</a></li>
</ul>
</li>
</ul>
<h1 id="4-7-字符串"><a href="#4-7-字符串" class="headerlink" title="4.7 字符串"></a>4.7 字符串</h1><ul>
<li><p>字符串DP</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2212">AOJ 2212: Stolen Jewel</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://codeforces.com/problemset/problem/86/C">CF 86C: Genetic Engineering</a></li>
</ul>
</li>
<li><p>字符串匹配</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://codeforces.com/problemset/problem/25/E">CF 25E: Test</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1312">AOJ 1312: Where’s Wally</a></li>
</ul>
</li>
<li><p>后缀数组</p>
<ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=1509">POJ 1509: Glass Beads</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3415">POJ 3415: Common Substrings</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://poj.org/problem?id=3729">POJ 3729: Facer’s string</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2292">AOJ 2292: Common Palindromes</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="http://codeforces.com/problemset/problem/123/D">CF 123D: String</a></li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/5a52a5c2/" data-id="ckw68jfl40001bgidazmnb7ck" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E5%88%92/" rel="tag">计划</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-递推总结(持续更新)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/f6444059/" class="article-date">
  <time datetime="2020-03-30T07:17:26.000Z" itemprop="datePublished">2020-03-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%80%92%E6%8E%A8/">递推</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/f6444059/">递推总结(持续更新!!!)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="递推总结-持续更新"><a href="#递推总结-持续更新" class="headerlink" title="递推总结(持续更新!!!)"></a>递推总结(持续更新!!!)</h2><h3 id="错排公式"><a href="#错排公式" class="headerlink" title="错排公式"></a>错排公式</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/bengshakalakaka/article/details/83420150">介绍</a></h4><p><strong>问题：</strong>现有10本书按照顺序摆放，现要求重新排列，使得新的书的顺序中每一本书都不在原来的位置，求有多少种排列方式？</p>
<p>这个问题推广一下，就是<strong>错排问题</strong>，是<strong>组合数学</strong>中的问题之一。考虑一个有n个元素的排列，若一个排列中所有的元素都不在自己原来的位置上，那么这样的排列就称为原排列的一个错排。 n个元素的错排数记为<strong>D(n)<strong>。 研究一个排列错排个数的问题，叫做</strong>错排问题</strong>或称为<strong>更列问题</strong>。</p>
<p>OK，现在详细分析这个问题，我们要的最终结果就是书的编号与所在位置的编号不同，在这里，我们把n本书的错排操作数记为<strong>D(n)<strong>，那</strong>n-1</strong>本就是<strong>D(n-1)<strong>，</strong>n-2</strong>本就是**D(n-2)**啦，下面，我们把放置问题分为两步（初始位置号与书的编号相同）：</p>
<p><strong>第一步：</strong></p>
<ul>
<li>我们取一本书，书的编号为m，现在这本书就在我们手中，注意，按照题目要求，最开始的时候这本书的位置号也是m号，按照题目要求，我们现在放书时不能放回这个位置m了，而是要选择其他位置，那么有多少种选择呢?</li>
<li>想一下，总共有n本书，n个位置，现在我手里这本书不能把它放到位置m，那么剩下的n-1个位置我当然就是随便扔啦，也就是n-1种扔法，好，现在，我选择了位置k，我决定把手里这本书放到位置k这里，记住这个是位置编号k，那么，我肯定要把原来这里的编号为k的书拿出来，再把这本编号为n的书放进去喽。所以，现在我们手里的书的编号是k。</li>
</ul>
<p><strong>第二步：</strong></p>
<ul>
<li><p>我们把手里这本编号为k的书本放到书架，注意，放的过程中我们又面临两种情况，可以想到，此时此刻现在书架上编号m的位置是空着的，所以我们可以选择放在这个位置上，书的编号为k，位置编号为m，没错，满足题意，这是第一种情况，还有一种就是我不选择这个空着的位置m，我再重新选择一个新的位置，我们称之为第二种情况，下面详细分析</p>
</li>
<li><p><strong>第一种情况：</strong>我把这本编号为k的书放到这个编号为m的地址，那现在我们面前是什么状况呢，就是位置k和位置m的书交换位置，也就是位置号不等于书号，即满足错排，总共n个位置，我们只动了m和k这两个位置，那么剩下的n-2个位置还是纹丝不动，保持一一对应的关系呢</p>
<p>​    那么对于剩下的这n-2本书的错排操作，我们又回到了问题的起点，求n-2本的错排操作数D(n-2)，结合第一步，我们可以得到第一种情况总共有**(n-1)*D(n-2)**种方法</p>
</li>
<li><p><strong>第二种情况：</strong>我们不选择这个空着的位置m啦，我们手持这本编号为k的书，我们从除了位置m以及位置k的剩下的n-2个位置中选择一个位置。 </p>
<p>​    OK，我们现在开始想，我手里这本书不能放在这个位置m，嗯嗯，除了第一步我们放置的那本书m不用管了，我们还要搞手里这本和剩下的n-2本，也就是n-1本，同时又要求手里这本k还不能放到位置m，这是不是就相当于把手里这本加上剩下的n-2本也就是n-1本书进行错排呢？  </p>
<p>​    哇哇哇，想一想，错排的定义，要求每本书都不能呆在某一个特定位置，是不是刚好符合呢QWQ，所以，现在的为题就到了求手里这本和剩下的n-2本总共是n-1本书的错排操作数，我们记为D(n-1)，结合第一步，我们得出这第二种情况共有**(n-1)*D(n-1)**种方法</p>
</li>
</ul>
<p>好的，现在我们总结两种情况，结果进行相加，就可以得到递推公式啦<br><strong>递推公式为：</strong><code>D(n)=(n-1)*(D(n-1)+D(n-2))</code></p>
<h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p>1、**<a target="_blank" rel="noopener" href="http://acm.hdu.edu.cn/showproblem.php?pid=2048">神、上帝以及老天爷</a>**</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//计算阶乘</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> sum=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)sum*=i;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> f[<span class="number">30</span>]=&#123;<span class="number">0</span>&#125;;<span class="comment">//长整型数组用来存放错误的抽取</span></span><br><span class="line">    f[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    f[<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;<span class="number">21</span>;i++)f[i]=(i<span class="number">-1</span>)*(f[i<span class="number">-1</span>]+f[i<span class="number">-2</span>]);<span class="comment">//递推公式</span></span><br><span class="line">    <span class="comment">//以上进行预处理</span></span><br><span class="line">    <span class="keyword">int</span> c,n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;c;</span><br><span class="line">    <span class="keyword">while</span>(c--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">        <span class="keyword">double</span> ans=f[n]*<span class="number">100.0</span>/func(n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.2f%%\n&quot;</span>,ans);<span class="comment">//主义输出格式</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/bengshakalakaka/article/details/83420150">https://blog.csdn.net/bengshakalakaka/article/details/83420150</a></p>
<h3 id="组合-错排"><a href="#组合-错排" class="headerlink" title="组合+错排"></a>组合+错排</h3><h4 id="例题-1"><a href="#例题-1" class="headerlink" title="例题"></a>例题</h4><p>2、<a target="_blank" rel="noopener" href="http://acm.hdu.edu.cn/showproblem.php?pid=2049">不容易系列之(4)——考新郎</a></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> c,m,n;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> f[<span class="number">25</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> C[<span class="number">25</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    f[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    f[<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;=<span class="number">20</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i]=(i<span class="number">-1</span>)*(f[i<span class="number">-1</span>]+f[i<span class="number">-2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    C[<span class="number">0</span>]=<span class="number">1</span>;C[<span class="number">1</span>]=<span class="number">1</span>;C[<span class="number">2</span>]=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;=<span class="number">20</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        C[i]=C[i<span class="number">-1</span>]*i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;c;</span><br><span class="line">    <span class="keyword">while</span>(c--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;C[n]/C[m]/C[n-m]*f[m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="单纯地递推"><a href="#单纯地递推" class="headerlink" title="单纯地递推"></a>单纯地递推</h3><h4 id="例题-2"><a href="#例题-2" class="headerlink" title="例题"></a>例题</h4><p>3、<a target="_blank" rel="noopener" href="http://acm.hdu.edu.cn/showproblem.php?pid=2050">折线分割平面</a></p>
<p><strong>思路：列举找规律</strong></p>
<blockquote>
<p>第1条折线，穿过0条线，多了1个区间；</p>
<p>第2条折线，穿过2条线，多了5个区间；</p>
<p>第3条折线，穿过4条线，多了9个区间；</p>
<p>第4条折线，穿过6条线，多了13个区间；</p>
<p>多的区间: 2*2*(n-1)+1</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans[<span class="number">10005</span>]=&#123;<span class="number">0</span>,<span class="number">2</span>,<span class="number">7</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;<span class="number">10005</span>;i++)ans[i]=ans[i<span class="number">-1</span>]+<span class="number">4</span>*(i<span class="number">-1</span>)+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> t,n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;ans[n]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/f6444059/" data-id="ckw68jfm8002cbgid6jes3fnp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hdu/" rel="tag">hdu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%94%99%E6%8E%92%E5%85%AC%E5%BC%8F/" rel="tag">错排公式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-素数筛法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/c7e65d0f/" class="article-date">
  <time datetime="2020-03-30T06:44:09.000Z" itemprop="datePublished">2020-03-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E8%AE%BA/">数论</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/c7e65d0f/">素数筛法(转载+总结)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="素数筛法-转载-总结"><a href="#素数筛法-转载-总结" class="headerlink" title="素数筛法(转载+总结)"></a>素数筛法(<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/100051075">转载</a>+总结)</h2><h3 id="埃氏筛"><a href="#埃氏筛" class="headerlink" title="埃氏筛"></a>埃氏筛</h3><p>​        埃式筛的复杂度是 *<em>O(n</em>loglogn)**，基本上可以视为线性。</p>
<p>​        它的过程是这样的：</p>
<p>我们把2~n的数按顺序写出来：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D2&3&4&5&6&7&8&9&10&11&12&13&14&15&16%5Cend%7Bmatrix%7D"></p>
<p>从前往后看，找到第一个未被划掉的数，2，这说明它是质数。然后把2的倍数（不包括2）划掉：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D%7B2%7D&3&%5Ccancel4&5&%5Ccancel6&7&%5Ccancel8&9&%5Ccancel%7B10%7D&11&%5Ccancel%7B12%7D&13&%5Ccancel%7B14%7D&15&%5Ccancel%7B16%7D%5Cend%7Bmatrix%7D"></p>
<p>下一个未被划掉的数是3，它是质数，把3的倍数划掉：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D2&%5Ccolor%7Bblue%7D3&%5Ccancel4&5&%5Ccancel6&7&%5Ccancel8&%5Ccancel%7B9%7D&%5Ccancel%7B10%7D&11&%5Ccancel%7B12%7D&13&%5Ccancel%7B14%7D&%5Ccancel%7B15%7D&%5Ccancel%7B16%7D%5Cend%7Bmatrix%7D"></p>
<p>接下来应该是5，但是5已经超过  16^(0.5) 了，所以遍历结束，剩下未被划掉的都是素数：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D2&%5Ccolor%7Bblue%7D3&%5Ccancel4&%5Ccolor%7Bblue%7D5&%5Ccancel6&%5Ccolor%7Bblue%7D7&%5Ccancel8&%5Ccancel%7B9%7D&%5Ccancel%7B10%7D&%5Ccolor%7Bblue%7D%7B11%7D&%5Ccancel%7B12%7D&%5Ccolor%7Bblue%7D%7B13%7D&%5Ccancel%7B14%7D&%5Ccancel%7B15%7D&%5Ccancel%7B16%7D%5Cend%7Bmatrix%7D"></p>
<p>如何？是不是比一个一个判断快多了？这个过程写成代码就是：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init_is_prime</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//n表示上限</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(is_prime,<span class="number">1</span>,<span class="keyword">sizeof</span>(is_prime));</span><br><span class="line">    <span class="comment">//is_prime[0]=0;is_prime[1]=0;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!is_prime[i])<span class="keyword">continue</span>;</span><br><span class="line">        ans[cnt++]=i;<span class="comment">//如果是素数的话，就加入ans中</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i*<span class="number">2</span>;j&lt;=n;j+=i)is_prime[j]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        这个算法的复杂度是 <strong>O(n*loglogn)</strong> ，还是非常优秀了。但是我们可能会发现，在筛的过程中我们会重复筛到同一个数，例如12同时被2和3筛到，30同时被2、3和5筛到。所以我们引入<strong>欧拉筛</strong>，也叫<strong>线性筛</strong>，可以在 <strong>O(n)<strong>时间内完成对2~n的筛选。它的核心思想是：</strong>让每一个合数被其最小质因数筛到</strong>。</p>
<h3 id="欧拉筛"><a href="#欧拉筛" class="headerlink" title="欧拉筛"></a>欧拉筛</h3><p>我们这次除了把2~n列出来，还维护一个<strong>质数表</strong>：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D2&3&4&5&6&7&8&9&10&11&12&13&14&15&16%5Cend%7Bmatrix%7D+%5C%5C%5Ctext%7Bprimes:%7D%5C;()"></p>
<p>还是从头到尾遍历，第一个数是2，未被划掉，把它放进质数表：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D2&3&4&5&6&7&8&9&10&11&12&13&14&15&16%5Cend%7Bmatrix%7D+%5C%5C%5Ctext%7Bprimes:%7D%5C;(2,)"></p>
<p>然后我们用2去乘质数表里的每个数，划掉它们：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D2&3&%5Ccancel4&5&6&7&8&9&10&11&12&13&14&15&16%5Cend%7Bmatrix%7D+%5C%5C%5Ctext%7Bprimes:%7D%5C;(2,)"></p>
<p>下一个是3，加入质数表，划掉6、9：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D2&%5Ccolor%7Bblue%7D3&%5Ccancel4&5&%5Ccancel6&7&8&%5Ccancel9&10&11&12&13&14&15&16%5Cend%7Bmatrix%7D+%5C%5C%5Ctext%7Bprimes:%7D%5C;(2,3,)"></p>
<p>下一个是4（注意这里划掉的数也要遍历，只是不加入质数表），先划掉8，但我们不划掉12，因为12 **(12=2 x 6 = 3 x 4)**应该由它的最小质因数2筛掉，而不是3。</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D2&%5Ccolor%7Bblue%7D3&%5Ccancel4&5&%5Ccancel6&7&%5Ccancel8&%5Ccancel9&10&11&12&13&14&15&16%5Cend%7Bmatrix%7D+%5C%5C%5Ctext%7Bprimes:%7D%5C;(2,3,)"></p>
<p>下一个是5，加入质数表，划掉10，15：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D2&%5Ccolor%7Bblue%7D3&%5Ccancel4&%5Ccolor%7Bblue%7D5&%5Ccancel6&7&%5Ccancel8&%5Ccancel9&%5Ccancel%7B10%7D&11&12&13&14&%5Ccancel%7B15%7D&16%5Cend%7Bmatrix%7D+%5C%5C%5Ctext%7Bprimes:%7D%5C;(2,3,5,)"></p>
<p>下一个是6，划掉12，6被2整除，跳过。</p>
<p>……</p>
<p>按这样的步骤进行下去，可以筛掉所有的合数，并得到一张质数表。</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Bmatrix%7D%5Ccolor%7Bblue%7D2&%5Ccolor%7Bblue%7D3&%5Ccancel4&%5Ccolor%7Bblue%7D5&%5Ccancel6&%5Ccolor%7Bblue%7D7&%5Ccancel8&%5Ccancel9&%5Ccancel%7B10%7D&%5Ccolor%7Bblue%7D%7B11%7D&%5Ccancel%7B12%7D&%5Ccolor%7Bblue%7D%7B13%7D&%5Ccancel%7B14%7D&%5Ccancel%7B15%7D&%5Ccancel%7B16%7D%5Cend%7Bmatrix%7D+%5C%5C%5Ctext%7Bprimes:%7D%5C;(2,3,5,7,11,13)"></p>
<p>详细证明见：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/100051075">https://zhuanlan.zhihu.com/p/100051075</a></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> n)</span><span class="comment">//n表示上限</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(is_prime,<span class="number">1</span>,<span class="keyword">sizeof</span>(is_prime));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(is_prime[i])ans[cnt++]=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;cnt&amp;&amp;i*ans[j]&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            is_prime[i*ans[j]]=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(i%ans[j]==<span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h3><p>​        还是多多练习欧拉筛吧，O(n)还是挺香的，然后还要注意数据读取的优化。</p>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P3383">洛谷P3383 【模板】线性筛素数</a></p>
<p>AC code</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">bool</span> is_prime[<span class="number">100000001</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans[<span class="number">100000001</span>];</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">string</span> s;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> sum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)</span><br><span class="line">	&#123;</span><br><span class="line">		sum=sum*<span class="number">10</span>+s[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> n,q,k,cnt=<span class="number">1</span>;<span class="comment">//开longlong以防万一</span></span><br><span class="line">    n=read();q=read();<span class="comment">//这样读数据应该快一点</span></span><br><span class="line">    <span class="comment">//把函数体放在main里面省去调用函数的时间</span></span><br><span class="line">    <span class="built_in">memset</span>(is_prime,<span class="number">1</span>,<span class="keyword">sizeof</span>(is_prime));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(is_prime[i])ans[cnt++]=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;cnt&amp;&amp;i*ans[j]&lt;=n;j++)<span class="comment">//注意不能越界</span></span><br><span class="line">        &#123;</span><br><span class="line">            is_prime[i*ans[j]]=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(i%ans[j]==<span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;k);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans[k]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/c7e65d0f/" data-id="ckw68jfm70029bgid2xrxgfxf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%83%E6%B0%8F%E7%AD%9B%E6%B3%95/" rel="tag">埃氏筛法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AC%A7%E6%8B%89%E7%AD%9B%E6%B3%95/" rel="tag">欧拉筛法</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-MNIST手写数字识别的多种方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/e8049b71/" class="article-date">
  <time datetime="2020-03-13T14:28:08.000Z" itemprop="datePublished">2020-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a>►<a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/TensorFlow/">TensorFlow</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/e8049b71/">MNIST手写数字识别的两种实现方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>​        当我们学习编程语言时， 第一课通常会学习一个简单的 <code>“Hello World”</code> 程序，而<code> MNIST 手写字符识别</code>可以算得上是机器学习界的 <code>“Hello World“ </code>。MNIST 是由 Yann LeCun 等人建立的一个手写字符数据集。它简单易用，是一个很好的入门范例。</p>
<p>​        在<code>MNIST</code>数据集中有两类图像：一类是训练图像（对应文件 <code>train-images-idx3-ubyte.gz</code> 和 <code>train-labels-idxl-ubyte.gz</code> ），另一类是测试图像（对应文件 <code>t10k-images-idx3-ubyte.gz</code> 和 <code>tl0k-labels-idxl-ubyte.gz</code> ）。 训练图像一共有60000张，供研究人员训练出合适的模型。测试图像一共有10000张，供研究人员测试训练的模型的性能 。</p>
<h2 id="Softmax回归实现MNIST手写数字识别-accuracy≈0-91"><a href="#Softmax回归实现MNIST手写数字识别-accuracy≈0-91" class="headerlink" title="Softmax回归实现MNIST手写数字识别(accuracy≈0.91)"></a><code>Softmax</code>回归实现MNIST手写数字识别(accuracy≈0.91)</h2><h3 id="1、Softmax回归的原理"><a href="#1、Softmax回归的原理" class="headerlink" title="1、Softmax回归的原理"></a>1、<code>Softmax</code>回归的原理</h3><p>​        <code>Softmax</code>回归是一个线性的多类分类模型，实际上白是直接从 <code>Logistic</code> 回归模型转化而来的。区别在于 <code>Logistic</code> 回归模型为两类分类模型，而 <code>Softmax</code>模型为多类分类模型。<br>​        在手写体识别问题中 ，一共有 10 个类别（ 0~ 9 ），我们希望对输入的图像计算白属于每个类别的概率。如属于 9 的概率为 70% ，属于 1 的概率为 10%等。最后模型预测的结果就是概率最大的那个类别。</p>
<p>​        <code>Softmax</code>函数的定义：<img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagesMNIST_1.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagesMNIST_2.png"></p>
<h3 id="Softmax回归在Tensorflow中的实现"><a href="#Softmax回归在Tensorflow中的实现" class="headerlink" title="Softmax回归在Tensorflow中的实现"></a><code>Softmax</code>回归在<code>Tensorflow</code>中的实现</h3><p>1）首先导入<code>TensorFlow</code>模块，并且导入数据集。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"><span class="keyword">import</span> scipy.misc</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">mnist=input_data.read_data_sets(<span class="string">&#x27;MNIST_data&#x27;</span>,one_hot=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<blockquote>
<p>Extracting MNIST_data\train-images-idx3-ubyte.gz </p>
<p>Extracting MNIST_data\train-labels-idx1-ubyte.gz </p>
<p>Extracting MNIST_data\t10k-images-idx3-ubyte.gz </p>
<p>Extracting MNIST_data\t10k-labels-idx1-ubyte.gz</p>
</blockquote>
<p>2）创建占位符、定义变量、设定输出模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#x、y为占位符，其中x代表识别的图像输入，y代表图像实际的标签(label)</span></span><br><span class="line">x=tf.placeholder(tf.float32,[<span class="literal">None</span>,<span class="number">784</span>])</span><br><span class="line">y=tf.placeholder(tf.float32,[<span class="literal">None</span>,<span class="number">10</span>])</span><br><span class="line"><span class="comment">#w是一个变量，在训练过程中根据损失来自动改变大小</span></span><br><span class="line">w=tf.Variable(tf.zeros([<span class="number">784</span>,<span class="number">10</span>]))</span><br><span class="line"><span class="comment">#b是偏置项(biases)</span></span><br><span class="line">b=tf.Variable(tf.zeros([<span class="number">10</span>]))</span><br><span class="line"></span><br><span class="line">pred=tf.nn.softmax(tf.matmul(x,w)+b)</span><br></pre></td></tr></table></figure>

<p>3）定义交叉熵、定义优化器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cross_entropy=tf.reduce_mean(-tf.reduce_sum(y*tf.log(pred)))</span><br><span class="line"><span class="comment">#利用梯度下降法对模型的参数(w,b)进行优化、调节</span></span><br><span class="line">optimizer=tf.train.GradientDescentOptimizer(<span class="number">0.01</span>).minimize(cross_entropy)</span><br></pre></td></tr></table></figure>

<p>4）创建会话、初始化变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#因为之前的定义都是节点，而在TensorFlow中，需要构建会话Session才能让这个模型动起来</span></span><br><span class="line"><span class="comment">#在这个过程中传递张量进行运算</span></span><br><span class="line">sess=tf.Session()</span><br><span class="line"><span class="comment">#初始化之前出现的所有变量</span></span><br><span class="line">init=tf.global_variables_initializer()</span><br><span class="line">sess.run(init)</span><br></pre></td></tr></table></figure>

<p>5）优化w、b变量（对model进行训练）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):<span class="comment">#进行1000步梯度下降</span></span><br><span class="line">    xs,ys=mnist.train.next_batch(<span class="number">100</span>)<span class="comment">#从mnist.train中提取100个训练数据</span></span><br><span class="line">    <span class="comment">#在Session中运行优化器(optimizer)，运行时要传入占位符的值</span></span><br><span class="line">    sess.run(optimizer,feed_dict=&#123;x:xs,y:ys&#125;)</span><br></pre></td></tr></table></figure>

<p>6）检测模型的训练结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#正确的预测结果</span></span><br><span class="line">correct_prediction=tf.equal(tf.argmax(pred,<span class="number">1</span>),tf.argmax(y,<span class="number">1</span>))</span><br><span class="line"><span class="comment">#计算预测准确率，它们都是Tensor</span></span><br><span class="line">accuracy=tf.reduce_mean(tf.cast(correct_prediction,tf.float32))</span><br><span class="line"><span class="comment">#在Session中运行Tensor的值可以得到Tensor</span></span><br><span class="line"><span class="built_in">print</span>(sess.run(accuracy,feed_dict=&#123;x:mnist.test.images,y:mnist.test.labels&#125;))</span><br></pre></td></tr></table></figure>

<p>最后的结果输出：</p>
<blockquote>
<p>0.9194</p>
</blockquote>
<h3 id="反思"><a href="#反思" class="headerlink" title="反思"></a>反思</h3><p>在第(6)部分，我们传入的是测试值，运行结果为0.9194，也就是说我们的手写字体的识别率只有91.94%，这里的预测准确率并不高。因此我将试着用CNN(卷积神经网络)来实现MNIST手写数字的识别，正确率可以达到99%。</p>
<h2 id="两层卷积网络实现分类"><a href="#两层卷积网络实现分类" class="headerlink" title="两层卷积网络实现分类"></a>两层卷积网络实现分类</h2><h3 id="1、什么是CNN-卷积神经网络"><a href="#1、什么是CNN-卷积神经网络" class="headerlink" title="1、什么是CNN(卷积神经网络)"></a>1、什么是CNN(卷积神经网络)</h3><p>因为篇幅原因，本文不在这里讲解CNN的定义和基本模型，如果想要了解CNN原理的可以看看这些资料：</p>
<p><a target="_blank" rel="noopener" href="https://classroom.udacity.com/courses/ud730/lessons/6377263405/concepts/63796332430923">Google官方卷积神经网络介绍视频</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Eastmount/article/details/103620235">卷积神经网络CNN原理详解及TensorFlow编写CNN</a></p>
<h3 id="2、卷积实现分类"><a href="#2、卷积实现分类" class="headerlink" title="2、卷积实现分类"></a>2、卷积实现分类</h3><p>1）同样的和之前一样导入模块、导入数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line">mnist=input_data.read_data_sets(<span class="string">&quot;MNIST_data/&quot;</span>,one_hot=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<blockquote>
<p>Extracting MNIST_data/train-images-idx3-ubyte.gz </p>
<p>Extracting MNIST_data/train-labels-idx1-ubyte.gz </p>
<p>Extracting MNIST_data/t10k-images-idx3-ubyte.gz </p>
<p>Extracting MNIST_data/t10k-labels-idx1-ubyte.gz</p>
</blockquote>
<p>2）定义占位符，与上文相同</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x=tf.placeholder(tf.float32,[<span class="literal">None</span>,<span class="number">784</span>])</span><br><span class="line">y=tf.placeholder(tf.float32,[<span class="literal">None</span>,<span class="number">10</span>])</span><br></pre></td></tr></table></figure>

<p>3）从这步开始与上面开始有了差异。因为这一次使用的是卷积神经网络对图像进行分类，所以我们不能再使用784维的向量来表示输入的x，而是将其还原成28*28的图像形式。[-1,28,28,1]中的-1表示形状第一维的大小是根据x自动确定的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将单张图片从784维向量重新还原为28x28的矩阵图片</span></span><br><span class="line">x_image=tf.reshape(x,[-<span class="number">1</span>,<span class="number">28</span>,<span class="number">28</span>,<span class="number">1</span>])</span><br></pre></td></tr></table></figure>

<p>4）定义卷积层的构造函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">weight_variable</span>(<span class="params">shape</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tf.Variable(tf.truncated_normal(shape,stddev=<span class="number">0.1</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bias_variable</span>(<span class="params">shape</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tf.Variable(tf.constant(<span class="number">0.1</span>,shape=shape))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv2d</span>(<span class="params">x,w</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tf.nn.conv2d(x,w,strides=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],padding=<span class="string">&#x27;SAME&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max_pool_2x2</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tf.nn.max_pool(x,ksize=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>],strides=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>],padding=<span class="string">&#x27;SAME&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>5）第一个卷积层</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一卷积层</span></span><br><span class="line">w_conv1=weight_variable([<span class="number">5</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">32</span>])</span><br><span class="line">b_conv1=bias_variable([<span class="number">32</span>])</span><br><span class="line">h_conv1=tf.nn.relu(conv2d(x_image,w_conv1)+b_conv1)</span><br><span class="line">h_pool1=max_pool_2x2(h_conv1)</span><br></pre></td></tr></table></figure>

<p>6）第二个卷积层</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第二卷积层</span></span><br><span class="line">w_conv2=weight_variable([<span class="number">5</span>,<span class="number">5</span>,<span class="number">32</span>,<span class="number">64</span>])</span><br><span class="line">b_conv2=bias_variable([<span class="number">64</span>])</span><br><span class="line">h_conv2=tf.nn.relu(conv2d(h_pool1,w_conv2)+b_conv2)</span><br><span class="line">h_pool2=max_pool_2x2(h_conv2)</span><br></pre></td></tr></table></figure>

<p>7）第一个全连接层，并且加入了Dropout，防止神经网络<a target="_blank" rel="noopener" href="https://blog.csdn.net/Eastmount/article/details/103595096">过拟合</a>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全连接层  输出1024维的向量</span></span><br><span class="line">w_fc1=weight_variable([<span class="number">7</span>*<span class="number">7</span>*<span class="number">64</span>,<span class="number">1024</span>])</span><br><span class="line">b_fc1=bias_variable([<span class="number">1024</span>])</span><br><span class="line">h_pool2_flat=tf.reshape(h_pool2,[-<span class="number">1</span>,<span class="number">7</span>*<span class="number">7</span>*<span class="number">64</span>])</span><br><span class="line">h_fc1=tf.nn.relu(tf.matmul(h_pool2_flat,w_fc1)+b_fc1)</span><br><span class="line"></span><br><span class="line">keep_prob=tf.placeholder(tf.float32)</span><br><span class="line">h_fc1_drop=tf.nn.dropout(h_fc1,keep_prob)</span><br></pre></td></tr></table></figure>

<p>8）第二个全连接层，因为上一个全连接层将输出变成了1024维的向量，由于这是一个分类问题，我们需要让这个输出变为对10个类别的概率预测。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w_fc2=weight_variable([<span class="number">1024</span>,<span class="number">10</span>])</span><br><span class="line">b_fc2=bias_variable([<span class="number">10</span>])</span><br><span class="line">y_conv=tf.matmul(h_fc1_drop,w_fc2)+b_fc2</span><br></pre></td></tr></table></figure>

<p>9）<code>y_conv</code> 相当于 <code>Softmax</code> 模型中的 <code>Logit</code>，当然可以使用 <code>Softmax</code> 函数将其转换为10个类别的概率，再定义交叉熵损失。但其实<code>TensorFlow</code>提供了 一个更直接的<code>tf.nn.softmax_cross_ entropy_ with _logits</code>函数，它可以直接对<code>Logit</code>定义交叉熵损失，写法为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cross_entropy=tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(labels=y,logits=y_conv))</span><br><span class="line"></span><br><span class="line">optimizer=tf.train.AdamOptimizer(<span class="number">1e-4</span>).minimize(cross_entropy)</span><br></pre></td></tr></table></figure>

<p>10）定义测试结果的准确率</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">correct_prediction=tf.equal(tf.argmax(y_conv,<span class="number">1</span>),tf.argmax(y,<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">accuracy=tf.reduce_mean(tf.cast(correct_prediction,tf.float32))</span><br></pre></td></tr></table></figure>

<p>11）训练过程与之前一样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建Session，对变量初始化</span></span><br><span class="line">sess=tf.InteractiveSession()</span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"></span><br><span class="line"><span class="comment">#训练2000步，根据需要自由调整</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2000</span>):</span><br><span class="line">    batch=mnist.train.next_batch(<span class="number">50</span>)</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">        train_accuracy=accuracy.<span class="built_in">eval</span>(feed_dict=&#123;x:batch[<span class="number">0</span>],y:batch[<span class="number">1</span>],keep_prob:<span class="number">1.0</span>&#125;)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;step %d, training accuracy %g&#x27;</span>%(i,train_accuracy))</span><br><span class="line">        </span><br><span class="line">    optimizer.run(feed_dict=&#123;x:batch[<span class="number">0</span>],y:batch[<span class="number">1</span>],keep_prob:<span class="number">0.5</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<blockquote>
<p>step 0, training accuracy 0.14 </p>
<p>step 100, training accuracy 0.86</p>
<p>…</p>
<p>step 1900, training accuracy 0.98</p>
</blockquote>
<p>12）训练结束后，输出在全体测试集上的准确率：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;test accuracy %g&#x27;</span>%accuracy.<span class="built_in">eval</span>(feed_dict=&#123;x:mnist.test.images,y:mnist.test.labels,keep_prob:<span class="number">1.0</span>&#125;))</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<blockquote>
<p>test accuracy 0.9739</p>
</blockquote>
<p>13）在经过多次调参之后，得到的最高的accuracy=0.9891.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/e8049b71/" data-id="ckw68jflg000hbgidc64j4isw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CNN/" rel="tag">CNN</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MNIST/" rel="tag">MNIST</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E8%B7%B5/" rel="tag">实践</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mnist手写数字识别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/7de3b458/" class="article-date">
  <time datetime="2020-03-12T13:13:36.000Z" itemprop="datePublished">2020-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a>►<a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/TensorFlow/">TensorFlow</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/7de3b458/">MNIST手写数字识别入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MNIST手写数字识别入门"><a href="#MNIST手写数字识别入门" class="headerlink" title="MNIST手写数字识别入门"></a>MNIST手写数字识别入门</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>经过前面TensorFlow基础的训练，可以发现，线性回归型的模型构建和训练是很简单的，但是因为其简单，在很多时候就用不上了，现在我们尝试利用单个神经元来解决MNIST手写数字识别的问题。</p>
<h3 id="载入数据"><a href="#载入数据" class="headerlink" title="载入数据"></a>载入数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="comment"># 从本地读取实验数据，如果本地没有，TensorFlow会自动从网上下载相关数据</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line">mnist=input_data.read_data_sets(<span class="string">&quot;MNIST_data/&quot;</span>,one_hot=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<h3 id="构建模型"><a href="#构建模型" class="headerlink" title="构建模型"></a>构建模型</h3><p><strong>创建占位符</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mnist 图中每张图片共有28*28784个像素点</span></span><br><span class="line">x=tf.placeholder(tf.float32,[<span class="literal">None</span>,<span class="number">784</span>],name=<span class="string">&quot;X&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0-9一共10个数字，=&gt;10个类别</span></span><br><span class="line">y=tf.placeholder(tf.float32,[<span class="literal">None</span>,<span class="number">10</span>],name=<span class="string">&quot;Y&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>定义变量</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义变量</span></span><br><span class="line">W=tf.Variable(tf.random_normal([<span class="number">784</span>,<span class="number">10</span>]),name=<span class="string">&quot;W&quot;</span>)</span><br><span class="line">b=tf.Variable(tf.zeros([<span class="number">10</span>]),name=<span class="string">&quot;b&quot;</span>) <span class="comment"># 以常数0初始化b</span></span><br></pre></td></tr></table></figure>

<p><strong>用单个神经元构建神经网络</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forward=tf.matmul(x,W)+b <span class="comment"># 前向计算</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 结果分类</span></span><br><span class="line">pred=tf.nn.softmax(forward) <span class="comment"># Softmax分类</span></span><br></pre></td></tr></table></figure>

<p><strong>设置训练参数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_epochs=<span class="number">100</span> <span class="comment">#训练轮数</span></span><br><span class="line">batch_size=<span class="number">10</span> <span class="comment"># 单词训练样本数</span></span><br><span class="line">total_batch=<span class="built_in">int</span>(mnist.train.num_examples/batch_size) <span class="comment"># 一轮训练有多少批次</span></span><br><span class="line">display_step=<span class="number">1</span> <span class="comment"># 显示粒度</span></span><br><span class="line">learning_rate=<span class="number">0.01</span> <span class="comment"># 学习率</span></span><br></pre></td></tr></table></figure>

<p><strong>定义损失函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义交叉熵损失函数</span></span><br><span class="line">loss_function=tf.reduce_mean(-tf.reduce_sum(y*tf.log(pred),reduction_indices=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<p><strong>选择优化器</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 梯度下降优化器</span></span><br><span class="line">optimizer=tf.train.GradientDescentOptimizer(learning_rate).minimize(loss_function)</span><br></pre></td></tr></table></figure>

<p><strong>定义准确率、声明会话、初始化变量</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查预测类别tf.argmax(pred,1)与实际类别tf.argmax(y,1)的匹配情况</span></span><br><span class="line">correct_prediction=tf.equal(tf.argmax(pred,<span class="number">1</span>),tf.argmax(y,<span class="number">1</span>))</span><br><span class="line"><span class="comment"># 准确率，将布尔值转化为浮点数，并计算平均值</span></span><br><span class="line">accuracy=tf.reduce_mean(tf.cast(correct_prediction,tf.float32))</span><br><span class="line">sess=tf.Session() <span class="comment"># 声明会话</span></span><br><span class="line">init=tf.global_variables_initializer() <span class="comment"># 变量初始化</span></span><br><span class="line">sess.run(init)</span><br></pre></td></tr></table></figure>

<h3 id="训练模型"><a href="#训练模型" class="headerlink" title="训练模型"></a>训练模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开始训练</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(train_epochs):</span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> <span class="built_in">range</span>(total_batch):</span><br><span class="line">        xs,ys=mnist.train.next_batch(batch_size) <span class="comment"># 读取批次数据</span></span><br><span class="line">        sess.run(optimizer,feed_dict=&#123;x:xs,y:ys&#125;) <span class="comment"># 执行批次训练</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># total_batch个批次训练完成后，使用验证数据计算误差与准确率；验证集没有分批</span></span><br><span class="line">    loss,acc=sess.run([loss_function,accuracy],</span><br><span class="line">                      feed_dict=&#123;x:mnist.validation.images,y:mnist.validation.labels&#125;)</span><br><span class="line">    <span class="comment"># 打印训练过程中的详细信息</span></span><br><span class="line">    <span class="keyword">if</span> (epoch+<span class="number">1</span>)%display_step==<span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Train Epoch:&quot;</span>,<span class="string">&quot;%02d&quot;</span>%(epoch+<span class="number">1</span>),<span class="string">&quot;Loss=&quot;</span>,<span class="string">&quot;&#123;:.9f&#125;&quot;</span>.<span class="built_in">format</span>(loss),\</span><br><span class="line">              <span class="string">&quot;Accuracy=&quot;</span>,<span class="string">&quot;&#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(acc))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Train Finished!&quot;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Train Epoch: 100 Loss= 0.303404093 Accuracy= 0.9156</p>
</blockquote>
<h3 id="评估模型"><a href="#评估模型" class="headerlink" title="评估模型"></a>评估模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试集</span></span><br><span class="line">accu_test=sess.run(accuracy,</span><br><span class="line">                  feed_dict=&#123;x:mnist.test.images,y:mnist.test.labels&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Test Accuracy:&quot;</span>,accu_test)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Test Accuracy: 0.8616</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 验证集</span></span><br><span class="line">accu_validation=sess.run(accuracy,</span><br><span class="line">                  feed_dict=&#123;x:mnist.validation.images,y:mnist.validation.labels&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Test Accuracy:&quot;</span>,accu_validation)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Test Accuracy: 0.8644</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 训练集</span></span><br><span class="line">accu_train=sess.run(accuracy,</span><br><span class="line">                  feed_dict=&#123;x:mnist.train.images,y:mnist.train.labels&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Test Accuracy:&quot;</span>,accu_train)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Test Accuracy: 0.854909</p>
</blockquote>
<h3 id="应用模型"><a href="#应用模型" class="headerlink" title="应用模型"></a>应用模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 由于pred预测结果是one-hot编码格式，所以需要转换为0~9数字</span></span><br><span class="line">prediction_result=sess.run(tf.argmax(pred,<span class="number">1</span>),</span><br><span class="line">                          feed_dict=&#123;x:mnist.test.images&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看预测结果</span></span><br><span class="line">prediction_result[<span class="number">0</span>:<span class="number">10</span>]</span><br></pre></td></tr></table></figure>

<p><strong>定义可视化函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot_images_labels_prediction</span>(<span class="params">images, <span class="comment"># 图像列表</span></span></span></span><br><span class="line"><span class="params"><span class="function">                                  labels, <span class="comment"># 标签列表</span></span></span></span><br><span class="line"><span class="params"><span class="function">                                  prediction, <span class="comment"># 预测值列表</span></span></span></span><br><span class="line"><span class="params"><span class="function">                                  index, <span class="comment"># 从第index个开始显示</span></span></span></span><br><span class="line"><span class="params"><span class="function">                                  num=<span class="number">10</span></span>):</span> <span class="comment"># 缺省一次显示10幅</span></span><br><span class="line">    fig=plt.gcf() <span class="comment"># 获取当前图标，Get Current Figure</span></span><br><span class="line">    fig.set_size_inches(<span class="number">10</span>,<span class="number">12</span>) <span class="comment"># 1英寸等于2.54cm</span></span><br><span class="line">    <span class="keyword">if</span> num&gt;<span class="number">25</span>:</span><br><span class="line">        num=<span class="number">25</span> <span class="comment"># 最多显示25个子图</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,num):</span><br><span class="line">        ax=plt.subplot(<span class="number">5</span>,<span class="number">5</span>,i+<span class="number">1</span>) <span class="comment"># 获取当前要处理的子图</span></span><br><span class="line">        </span><br><span class="line">        ax.imshow(np.reshape(images[index],(<span class="number">28</span>,<span class="number">28</span>)), <span class="comment"># 显示第index个图像</span></span><br><span class="line">                  cmap=<span class="string">&quot;binary&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        title=<span class="string">&quot;label=&quot;</span>+<span class="built_in">str</span>(np.argmax(labels[index]))</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(prediction)&gt;<span class="number">0</span>:</span><br><span class="line">            title+=<span class="string">&quot;,predict=&quot;</span>+<span class="built_in">str</span>(prediction[index])</span><br><span class="line">        </span><br><span class="line">        ax.set_title(title,fontsize=<span class="number">10</span>) <span class="comment"># 显示图上title信息</span></span><br><span class="line">        ax.set_xticks([]) <span class="comment">#不显示坐标轴</span></span><br><span class="line">        ax.set_yticks([])</span><br><span class="line">        index+=<span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    plt.show()</span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plot_images_labels_prediction(mnist.test.images,</span><br><span class="line">                              mnist.test.labels,</span><br><span class="line">                              prediction_result,<span class="number">0</span>,<span class="number">25</span>)</span><br></pre></td></tr></table></figure>

<h3 id="实验改进"><a href="#实验改进" class="headerlink" title="实验改进"></a>实验改进</h3><p>实验记录：(目标：0.9)</p>
<p>第一次：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_epochs=<span class="number">50</span> <span class="comment">#训练轮数</span></span><br><span class="line">batch_size=<span class="number">100</span> <span class="comment"># 单词训练样本数</span></span><br><span class="line">total_batch=<span class="built_in">int</span>(mnist.train.num_examples/batch_size) <span class="comment"># 一轮训练有多少批次</span></span><br><span class="line">display_step=<span class="number">1</span> <span class="comment"># 显示粒度</span></span><br><span class="line">learning_rate=<span class="number">0.01</span> <span class="comment"># 学习率</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Train Epoch: 50 Loss= 0.612978339 Accuracy= 0.8644</p>
</blockquote>
<p>第二次：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_epochs=<span class="number">80</span> <span class="comment">#训练轮数</span></span><br><span class="line">batch_size=<span class="number">100</span> <span class="comment"># 单词训练样本数</span></span><br><span class="line">total_batch=<span class="built_in">int</span>(mnist.train.num_examples/batch_size) <span class="comment"># 一轮训练有多少批次</span></span><br><span class="line">display_step=<span class="number">1</span> <span class="comment"># 显示粒度</span></span><br><span class="line">learning_rate=<span class="number">0.01</span> <span class="comment"># 学习率</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Train Epoch: 80 Loss= 0.553618193 Accuracy= 0.8728</p>
</blockquote>
<p>第三次：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_epochs=<span class="number">80</span> <span class="comment">#训练轮数</span></span><br><span class="line">batch_size=<span class="number">50</span> <span class="comment"># 单词训练样本数</span></span><br><span class="line">total_batch=<span class="built_in">int</span>(mnist.train.num_examples/batch_size) <span class="comment"># 一轮训练有多少批次</span></span><br><span class="line">display_step=<span class="number">1</span> <span class="comment"># 显示粒度</span></span><br><span class="line">learning_rate=<span class="number">0.01</span> <span class="comment"># 学习率</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Train Epoch: 80 Loss= 0.456805855 Accuracy= 0.8938</p>
</blockquote>
<p>第四次：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_epochs=<span class="number">100</span> <span class="comment">#训练轮数</span></span><br><span class="line">batch_size=<span class="number">50</span> <span class="comment"># 单词训练样本数</span></span><br><span class="line">total_batch=<span class="built_in">int</span>(mnist.train.num_examples/batch_size) <span class="comment"># 一轮训练有多少批次</span></span><br><span class="line">display_step=<span class="number">1</span> <span class="comment"># 显示粒度</span></span><br><span class="line">learning_rate=<span class="number">0.01</span> <span class="comment"># 学习率</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Train Epoch: 100 Loss= 0.410435736 Accuracy= 0.8994</p>
</blockquote>
<p>第五次：(成功！！！)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_epochs=<span class="number">100</span> <span class="comment">#训练轮数</span></span><br><span class="line">batch_size=<span class="number">25</span> <span class="comment"># 单词训练样本数</span></span><br><span class="line">total_batch=<span class="built_in">int</span>(mnist.train.num_examples/batch_size) <span class="comment"># 一轮训练有多少批次</span></span><br><span class="line">display_step=<span class="number">1</span> <span class="comment"># 显示粒度</span></span><br><span class="line">learning_rate=<span class="number">0.01</span> <span class="comment"># 学习率</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Train Epoch: 100 Loss= 0.357385010 Accuracy= 0.9064</p>
</blockquote>
<p>第六次：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_epochs=<span class="number">200</span> <span class="comment">#训练轮数</span></span><br><span class="line">batch_size=<span class="number">25</span> <span class="comment"># 单词训练样本数</span></span><br><span class="line">total_batch=<span class="built_in">int</span>(mnist.train.num_examples/batch_size) <span class="comment"># 一轮训练有多少批次</span></span><br><span class="line">display_step=<span class="number">1</span> <span class="comment"># 显示粒度</span></span><br><span class="line">learning_rate=<span class="number">0.01</span> <span class="comment"># 学习率</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Train Epoch: 200 Loss= 0.319452822 Accuracy= 0.9184</p>
</blockquote>
<p>第七次：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_epochs=<span class="number">100</span> <span class="comment">#训练轮数</span></span><br><span class="line">batch_size=<span class="number">10</span> <span class="comment"># 单词训练样本数</span></span><br><span class="line">total_batch=<span class="built_in">int</span>(mnist.train.num_examples/batch_size) <span class="comment"># 一轮训练有多少批次</span></span><br><span class="line">display_step=<span class="number">1</span> <span class="comment"># 显示粒度</span></span><br><span class="line">learning_rate=<span class="number">0.01</span> <span class="comment"># 学习率</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Train Epoch: 100 Loss= 0.303404093 Accuracy= 0.9156</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/7de3b458/" data-id="ckw68jflq0015bgidc3oe71b4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E8%B7%B5/" rel="tag">实践</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-TensorFlow实践——多变量线性回归" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/e831759b/" class="article-date">
  <time datetime="2020-03-08T14:39:54.000Z" itemprop="datePublished">2020-03-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a>►<a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/TensorFlow/">TensorFlow</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/e831759b/">TensorFlow实战——多变量线性回归</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="多变量线性回归"><a href="#多变量线性回归" class="headerlink" title="多变量线性回归"></a>多变量线性回归</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>根据Boston房价问题展开的多元线性回归问题的实践，但因现实生活中，对房价有影响的因素实在是太多了，因此，本例中的模型不能完全的概括完整房价的变化情况，但是通过这个实例，我们可以更好的掌握<code>TensorFlow</code>的编程基础，以及模型训练的整个流程。</p>
<h3 id="导入相关库"><a href="#导入相关库" class="headerlink" title="导入相关库"></a>导入相关库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib notebook</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.utils <span class="keyword">import</span> shuffle</span><br></pre></td></tr></table></figure>

<h3 id="通过Pandas导入数据"><a href="#通过Pandas导入数据" class="headerlink" title="通过Pandas导入数据"></a>通过Pandas导入数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取数据文件</span></span><br><span class="line">df=pd.read_csv(<span class="string">&quot;data/boston.csv&quot;</span>,header=<span class="number">0</span>)</span><br><span class="line"><span class="comment">#显示数据摘要描述信息</span></span><br><span class="line"><span class="built_in">print</span>(df.describe())</span><br></pre></td></tr></table></figure>

<h3 id="载入本例所需数据"><a href="#载入本例所需数据" class="headerlink" title="载入本例所需数据"></a>载入本例所需数据</h3><p>相关数据<a target="_blank" rel="noopener" href="https://www.icourse163.org/learn/ZUCC-1206146808?tid=1206445215#/learn/content?type=detail&id=1211173168&cid=1213736792">下载</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取df的值</span></span><br><span class="line">df=df.values</span><br><span class="line"><span class="comment"># 把df转换为np的数组格式</span></span><br><span class="line">df=np.array(df)</span><br></pre></td></tr></table></figure>

<h3 id="特征数据归一化"><a href="#特征数据归一化" class="headerlink" title="特征数据归一化"></a>特征数据归一化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对特征数据[0~11]列做(0-1)归一化处理</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">12</span>):</span><br><span class="line">    df[:,i]=(df[:,i]-df[:,i].<span class="built_in">min</span>())/(df[:,i].<span class="built_in">max</span>()-df[:,i].<span class="built_in">min</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment"># x_data为归一化后的前12列特征数据</span></span><br><span class="line">x_data=df[:,:<span class="number">12</span>]</span><br><span class="line"><span class="comment"># y_data为最后1列标签数据</span></span><br><span class="line">y_data=df[:,<span class="number">12</span>]</span><br></pre></td></tr></table></figure>

<h3 id="构建模型"><a href="#构建模型" class="headerlink" title="构建模型"></a>构建模型</h3><p><strong>定义占位符</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x=tf.placeholder(tf.float32,[<span class="literal">None</span>,<span class="number">12</span>],name=<span class="string">&quot;X&quot;</span>) <span class="comment"># 12个特征数据(12列)</span></span><br><span class="line">y=tf.placeholder(tf.float32,[<span class="literal">None</span>,<span class="number">1</span>],name=<span class="string">&quot;Y&quot;</span>) <span class="comment"># 1个标签数据(1列)</span></span><br></pre></td></tr></table></figure>

<p><strong>创建变量</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义了一个命名空间</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">&quot;Model&quot;</span>):</span><br><span class="line">    <span class="comment"># w 初始化值为 shape=(12,1) 的随机数</span></span><br><span class="line">    w=tf.Variable(tf.random_normal([<span class="number">12</span>,<span class="number">1</span>],stddev=<span class="number">0.01</span>),name=<span class="string">&quot;W&quot;</span>)</span><br><span class="line">    <span class="comment"># b 初始化值为 1.0</span></span><br><span class="line">    b=tf.Variable(<span class="number">1.0</span>,name=<span class="string">&quot;b&quot;</span>)</span><br><span class="line">    <span class="comment"># w和x是矩阵相乘，用matmul，不能用mutiply或者*</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">model</span>(<span class="params">x,w,b</span>):</span></span><br><span class="line">        <span class="keyword">return</span> tf.matmul(x,w)+b</span><br><span class="line">    <span class="comment"># 预测计算操作，前向计算节点</span></span><br><span class="line">    pred=model(x,w,b)</span><br></pre></td></tr></table></figure>

<p><strong>定义超参数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 迭代轮次</span></span><br><span class="line">train_epochs=<span class="number">50</span></span><br><span class="line"><span class="comment"># 学习率</span></span><br><span class="line">learning_rate=<span class="number">0.01</span></span><br></pre></td></tr></table></figure>

<p><strong>定义均方损失函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">&quot;LossFunction&quot;</span>):</span><br><span class="line">    loss_function=tf.reduce_mean(tf.<span class="built_in">pow</span>(y-pred,<span class="number">2</span>)) <span class="comment"># 均方误差</span></span><br></pre></td></tr></table></figure>

<p><strong>选择优化器</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建优化器</span></span><br><span class="line">optimizer=tf.train.GradientDescentOptimizer(learning_rate).minimize(loss_function)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sess=tf.Session()</span><br><span class="line">init=tf.global_variables_initializer()</span><br></pre></td></tr></table></figure>

<h3 id="模型训练"><a href="#模型训练" class="headerlink" title="模型训练"></a>模型训练</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">loss_list=[] <span class="comment"># 用于保存loss值的列表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(train_epochs):</span><br><span class="line">    loss_sum=<span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> xs,ys <span class="keyword">in</span> <span class="built_in">zip</span>(x_data,y_data):</span><br><span class="line">        </span><br><span class="line">        xs=xs.reshape(<span class="number">1</span>,<span class="number">12</span>)</span><br><span class="line">        ys=ys.reshape(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        _,summary_str,loss=sess.run([optimizer,sum_loss_op,loss_function],feed_dict=&#123;x:xs,y:ys&#125;)</span><br><span class="line">        </span><br><span class="line">        writer.add_summary(summary_str,epoch)</span><br><span class="line">        loss_sum=loss_sum+loss</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 打乱数据顺序</span></span><br><span class="line">    x_data,y_data=shuffle(x_data,y_data)</span><br><span class="line">    </span><br><span class="line">    b0temp=b.<span class="built_in">eval</span>(session=sess)</span><br><span class="line">    w0temp=w.<span class="built_in">eval</span>(session=sess)</span><br><span class="line">    loss_average=loss_sum/<span class="built_in">len</span>(y_data)</span><br><span class="line">    </span><br><span class="line">    loss_list.append(loss_average) <span class="comment"># 每轮添加一次</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#print(&quot;epoch=&quot;,epoch+1,&quot;loss=&quot;,loss_average,&quot;b=&quot;,b0temp,&quot;w=&quot;,w0temp)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;epoch=&quot;</span>,epoch+<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h3 id="检测模型"><a href="#检测模型" class="headerlink" title="检测模型"></a>检测模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">n=np.random.randint(<span class="number">506</span>)</span><br><span class="line"><span class="built_in">print</span>(n)</span><br><span class="line">x_test=x_data[n]</span><br><span class="line"></span><br><span class="line">x_test=x_test.reshape(<span class="number">1</span>,<span class="number">12</span>)</span><br><span class="line">predict=sess.run(pred,feed_dict=&#123;x:x_test&#125;)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;预测值：%f&quot;</span>%predict)</span><br><span class="line"></span><br><span class="line">target=y_data[n]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;标签值：%f&quot;</span>%target)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>可视化</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(loss_list)</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagestensduo(1).png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/e831759b/" data-id="ckw68jflo000ybgid7y9rg2wg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E8%B7%B5/" rel="tag">实践</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-TensorFlow实战——单变量线性回归" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/49ee5eaa/" class="article-date">
  <time datetime="2020-03-07T12:08:38.000Z" itemprop="datePublished">2020-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a>►<a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/TensorFlow/">TensorFlow</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/49ee5eaa/">TensorFlow实战——单变量线性回归</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="单变量线性回归"><a href="#单变量线性回归" class="headerlink" title="单变量线性回归"></a>单变量线性回归</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>单变量线性回归问题，因为其变量单一，因此，模型的搭建十分简单，拿来TensorFlow入门实战是最简单不过的了。</p>
<p>因为人工收集数据，再输入其中，比较麻烦，所以之间用随机数的方法生成人工数据集，来达到简化操作的目的。</p>
<h3 id="生成人工数据集"><a href="#生成人工数据集" class="headerlink" title="生成人工数据集"></a>生成人工数据集</h3><p>假设需要学习的函数为线性函数：y=2x+1</p>
<p>导入库：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在Jupyter中，使用 matplotlib 显示图像需要设置为 inline 模式，否则不会显示图像</span></span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt <span class="comment"># 载入matplotlib</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># 载入numpy</span></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf <span class="comment"># 载入TensorFlow</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置随机数种子</span></span><br><span class="line">np.random.seed(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p>生成随机数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#直接采用np生成等差数列的方法，生成100个点，每个点取值在-1~1之间</span></span><br><span class="line">x_data=np.linspace(-<span class="number">1</span>,<span class="number">1</span>,<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#y=2x+1+噪声，其中，噪声的维度与x_data一致</span></span><br><span class="line">y_data=<span class="number">2</span>*x_data+<span class="number">1.0</span>+np.random.randn(*x_data.shape)*<span class="number">0.4</span></span><br></pre></td></tr></table></figure>

<p>画出生成的散点和目标线性函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 画出随机生成数据的散点图</span></span><br><span class="line"></span><br><span class="line">plt.scatter(x_data,y_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画出想要通过学习得到的目标线性函数y=2x+1</span></span><br><span class="line"></span><br><span class="line">plt.plot(x_data,<span class="number">1.0</span>+<span class="number">2</span>*x_data,color=<span class="string">&quot;red&quot;</span>,linewidth=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>输出展示：</p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagestensdan(1).png"></p>
<h3 id="构建线性模型"><a href="#构建线性模型" class="headerlink" title="构建线性模型"></a>构建线性模型</h3><p>定义x和y的占位符：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义训练数据的占位符，x是特征值，y是标签值</span></span><br><span class="line"></span><br><span class="line">x=tf.placeholder(<span class="string">&quot;float&quot;</span>,name=<span class="string">&quot;x&quot;</span>)</span><br><span class="line">y=tf.placeholder(<span class="string">&quot;float&quot;</span>,name=<span class="string">&quot;y&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>构建回归模型：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">model</span>(<span class="params">x,w,b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tf.multiply(x,w)+b</span><br></pre></td></tr></table></figure>

<p>创建变量</p>
<ul>
<li>TensorFlow变量的声明函数是tf.Variable</li>
<li>tf.Variable的作用是保存和更新参数</li>
<li>变量的初始值可以是随机数、常数、或是通过其他变量的初始值计算得到</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建线性函数的斜率，变量w</span></span><br><span class="line">w=tf.Variable(<span class="number">1.0</span>,name=<span class="string">&quot;wO&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建线性函数的截距，变量b</span></span><br><span class="line">b=tf.Variable(<span class="number">0.0</span>,name=<span class="string">&quot;bO&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>预测值表示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pred是预测值，前向计算</span></span><br><span class="line">pred=model(x,w,b)</span><br></pre></td></tr></table></figure>

<h3 id="训练模型"><a href="#训练模型" class="headerlink" title="训练模型"></a>训练模型</h3><p>设置训练参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 迭代次数(训练轮数)</span></span><br><span class="line">train_epochs=<span class="number">10</span></span><br><span class="line"><span class="comment"># 学习率</span></span><br><span class="line">learning_rate=<span class="number">0.05</span></span><br><span class="line"><span class="comment"># 控制显示loss值的粒度</span></span><br><span class="line">display_step=<span class="number">10</span></span><br></pre></td></tr></table></figure>

<h3 id="定义损失函数"><a href="#定义损失函数" class="headerlink" title="定义损失函数"></a>定义损失函数</h3><ul>
<li>损失函数用于描述预测值与真实值之间的误差，从而指导模型收敛方向</li>
<li>常见损失函数：均方差和交叉熵</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 采用均方差作为损失函数</span></span><br><span class="line">loss_function=tf.reduce_mean(tf.square(y-pred))</span><br></pre></td></tr></table></figure>

<h3 id="定义优化器、定义最小化损失函数"><a href="#定义优化器、定义最小化损失函数" class="headerlink" title="定义优化器、定义最小化损失函数"></a>定义优化器、定义最小化损失函数</h3><p>选择优化器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 梯度下降优化器</span></span><br><span class="line">optimizer=tf.train.GradientDescentOptimizer(learning_rate).minimize(loss_function)</span><br></pre></td></tr></table></figure>

<h3 id="执行训练"><a href="#执行训练" class="headerlink" title="执行训练"></a>执行训练</h3><p>声明会话：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sess=tf.Session()</span><br></pre></td></tr></table></figure>

<p>变量初始化：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">init=tf.global_variables_initializer()</span><br><span class="line">sess.run(init)</span><br></pre></td></tr></table></figure>

<p>训练开始：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开始训练，轮数为 epoch，采用SGD随机梯度下降优化方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(train_epochs):</span><br><span class="line">    <span class="keyword">for</span> xs,ys <span class="keyword">in</span> <span class="built_in">zip</span>(x_data,y_data):</span><br><span class="line">        _,loss=sess.run([optimizer,loss_function],feed_dict=&#123;x: xs,y: ys&#125;)</span><br><span class="line">    bOtemp=b.<span class="built_in">eval</span>(session=sess)</span><br><span class="line">    wOtemp=w.<span class="built_in">eval</span>(session=sess)</span><br><span class="line">    plt.plot(x_data,wOtemp*x_data+bOtemp)<span class="comment"># 画图</span></span><br></pre></td></tr></table></figure>

<p>输出展示：</p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagestensdan(2).png"></p>
<h3 id="训练结果的可视化"><a href="#训练结果的可视化" class="headerlink" title="训练结果的可视化"></a>训练结果的可视化</h3><p>输出w和b：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;w:&quot;</span>,sess.run(w))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;b:&quot;</span>,sess.run(b))</span><br></pre></td></tr></table></figure>

<p>可视化：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(x_data,y_data,label=<span class="string">&quot;Original data&quot;</span>)</span><br><span class="line">plt.plot(x_data,x_data*sess.run(w)+sess.run(b),label=<span class="string">&quot;Fitted line&quot;</span>,color=<span class="string">&quot;r&quot;</span>,linewidth=<span class="number">3</span>)</span><br><span class="line">plt.legend(loc=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>输出展示：</p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagestensdan(3).png"></p>
<h3 id="利用学习到的模型进行预测"><a href="#利用学习到的模型进行预测" class="headerlink" title="利用学习到的模型进行预测"></a>利用学习到的模型进行预测</h3><p>预测方法一：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x_test=<span class="number">3.21</span></span><br><span class="line"></span><br><span class="line">predict=sess.run(pred,feed_dict=&#123;x:x_test&#125;)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;预测值：%f&quot;</span>%predict)</span><br><span class="line"></span><br><span class="line">target=<span class="number">2</span>*x_test+<span class="number">1.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;目标值：%f&quot;</span>%target)</span><br></pre></td></tr></table></figure>

<p>输出展示：</p>
<blockquote>
<p>预测值：7.405184 </p>
<p>目标值：7.420000</p>
</blockquote>
<p>预测方法二：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x_test=<span class="number">3.21</span></span><br><span class="line">predict=sess.run(w)*x_test+sess.run(b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;预测值：%f&quot;</span>%predict)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>预测值：7.405184</p>
</blockquote>
<h3 id="显示loss的训练"><a href="#显示loss的训练" class="headerlink" title="显示loss的训练"></a>显示loss的训练</h3><p>训练方式和前面的训练方式相同，只是在训练的工程中输出loss，具体代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开始训练，轮数为 epoch，采用SGD随机梯度下降优化方法</span></span><br><span class="line">step=<span class="number">0</span> <span class="comment"># 记录训练步数 </span></span><br><span class="line">loss_list=[] <span class="comment"># 用于保存loss值的列表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(train_epochs):</span><br><span class="line">    <span class="keyword">for</span> xs,ys <span class="keyword">in</span> <span class="built_in">zip</span>(x_data,y_data):</span><br><span class="line">        _,loss=sess.run([optimizer,loss_function],feed_dict=&#123;x: xs,y: ys&#125;)</span><br><span class="line">        <span class="comment"># 显示损失值 loss</span></span><br><span class="line">        <span class="comment"># display_step: 控制报告粒度</span></span><br><span class="line">        <span class="comment"># 例如，如果display_step设为2，则将每训练2个样本输出一次损失值</span></span><br><span class="line">        <span class="comment"># 与超参数不同，修改display_step不会更改模型所学习的规律</span></span><br><span class="line">        loss_list.append(loss)</span><br><span class="line">        step+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> step%display_step==<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Train Epoch:&quot;</span>,<span class="string">&quot;%02d&quot;</span>%(epoch+<span class="number">1</span>),<span class="string">&quot;step:%03d&quot;</span>%(step),<span class="string">&quot;loss=&quot;</span>,\</span><br><span class="line">                 <span class="string">&quot;&#123;:.9f&#125;&quot;</span>.<span class="built_in">format</span>(loss))</span><br><span class="line"></span><br><span class="line">    bOtemp=b.<span class="built_in">eval</span>(session=sess)</span><br><span class="line">    wOtemp=w.<span class="built_in">eval</span>(session=sess)</span><br><span class="line">    plt.plot(x_data,wOtemp*x_data+bOtemp)<span class="comment"># 画图</span></span><br></pre></td></tr></table></figure>

<p>显示loss图（1）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(loss_list)</span><br></pre></td></tr></table></figure>

<p>输出展示：</p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagestensdan(4).png"></p>
<p>显示loss图（2）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(loss_list,<span class="string">&quot;g2&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>输出展示：</p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagestensdan(5).png"></p>
<p>输出异常点：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x <span class="keyword">for</span> x <span class="keyword">in</span> loss_list <span class="keyword">if</span> x&gt;<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p>输出展示：</p>
<blockquote>
<p>[1.0133754, 1.2284044, 1.0088208, 1.2116321, 2.3539772, 2.3148305, 1.3175836, 1.0387748, 1.5018207, 1.547514, 1.5513999, 1.5517284, 1.5517554, 1.5517581, 1.5517581, 1.5517581, 1.5517581]</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/49ee5eaa/" data-id="ckw68jflm000sbgid210rbkm0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E8%B7%B5/" rel="tag">实践</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-爬虫入门(二)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/24058a9b/" class="article-date">
  <time datetime="2020-03-06T13:30:12.000Z" itemprop="datePublished">2020-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>►<a class="article-category-link" href="/categories/Python/%E7%88%AC%E8%99%AB/">爬虫</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/24058a9b/">爬虫入门(二)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="网络爬虫之提取"><a href="#网络爬虫之提取" class="headerlink" title="网络爬虫之提取"></a>网络爬虫之提取</h2><h3 id="Beautiful-Soup库入门"><a href="#Beautiful-Soup库入门" class="headerlink" title="Beautiful Soup库入门"></a>Beautiful Soup库入门</h3><p><strong>安装：</strong><code>pip install beautifulsoup4 </code></p>
<p><strong>遇到的问题：</strong></p>
<p>和<a href="">上一篇</a>一样，又遇到了同样的问题，然后又在百度找解决方法，发现了<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MjM5MDEyMDk4Mw==&mid=2650167858&idx=1&sn=daae966c476142ddcdbccb059585c960&chksm=be4b574a893cde5c98cafa2b9a333b9796113403027930dbe2141cc76b4dbf4ce20cd2d1089f&scene=21#wechat_redirect">我也曾经因安装库而抓狂，直到我遇到了</a>这篇文章，直到这个时候我才意识到，我之前安装的Anaconda3包含了几百个第三方库(详细介绍可以看看这篇文章)。</p>
<p><strong>解决方法：</strong></p>
<p>在Anaconda3的目录下找到beautifulsoup4 的文件包，直接复制粘贴到python下的第三方库的文件夹就行了</p>
<h3 id="Beautiful-Soup库的基本元素"><a href="#Beautiful-Soup库的基本元素" class="headerlink" title="Beautiful Soup库的基本元素"></a>Beautiful Soup库的基本元素</h3><p>demo.html</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">r=requests.get(<span class="string">&quot;http://python123.io/ws/demo.html&quot;</span>)</span><br><span class="line">demo=r.text</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(1).png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(2).png"></p>
<p><strong>遍历方式：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(3).png"></p>
<p><strong>下行遍历：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(4).png"></p>
<p><strong>上行遍历：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(5).png"></p>
<p><strong>平行遍历：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(6).png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(7).png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(8).png"></p>
<p><strong>让HTML内容更加“友好”的显示：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(9).png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/A-Egoist/Blog-Figure-bed/imagespc2(10).png"></p>
<h3 id="三种信息标记形式"><a href="#三种信息标记形式" class="headerlink" title="三种信息标记形式"></a>三种信息标记形式</h3><p><strong>XML：</strong>最早的通用信息标记语言，可扩展性好，但繁琐；Internet上的信息交互与传递</p>
<p><strong>JSON：</strong>信息有类型，时候程序处理(js)，较XML简洁；移动应用云端和节点的信息通信，无注释</p>
<p><strong>YAML：</strong>信息无类型，文本信息比利最高，可读性好；各类系统的配置文件，有注释易读</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://www.icourse163.org/learn/BIT-1001870001?tid=1206951268#/learn/content">https://www.icourse163.org/learn/BIT-1001870001?tid=1206951268#/learn/content</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://a-egoist.com/posts/24058a9b/" data-id="ckw68jfm60025bgidhbei3i4i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BeautifulSoup%E5%BA%93/" rel="tag">BeautifulSoup库</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ACM/">ACM</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ACM/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ACM/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/">算法</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ACM/%E7%AE%97%E6%B3%95/">算法</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DeepLearning/">DeepLearning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hello/">Hello</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Log/">Log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Parallel-Computing/">Parallel Computing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/%E7%88%AC%E8%99%AB/">爬虫</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/STL/">STL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/STL/C/">C++</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/">刷题记录</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/ACM/">ACM</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/ACM/%E7%AE%97%E6%B3%95/">算法</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/SQL/">SQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%88%AC%E8%99%AB/">爬虫</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%88%AC%E8%99%AB/Python/">Python</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/">数据结构及算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E8%AE%BA/">数论</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/TensorFlow/">TensorFlow</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%92%E6%8E%A8/">递推</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFS/" rel="tag">BFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BeautifulSoup%E5%BA%93/" rel="tag">BeautifulSoup库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CNN/" rel="tag">CNN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CUDA/" rel="tag">CUDA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DFS/" rel="tag">DFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LaTex/" rel="tag">LaTex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MNIST/" rel="tag">MNIST</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String/" rel="tag">String</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/attention/" rel="tag">attention</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hdu/" rel="tag">hdu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/random%E5%BA%93/" rel="tag">random库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/requests%E5%BA%93/" rel="tag">requests库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/time%E5%BA%93/" rel="tag">time库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transformer/" rel="tag">transformer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordcloud%E5%BA%93/" rel="tag">wordcloud库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%88%86/" rel="tag">二分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%8B%E7%BB%8D/" rel="tag">介绍</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%BC%80%E5%92%8C/" rel="tag">前缀和</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%BC%88/" rel="tag">博弈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E5%BD%A2%E5%BA%93/" rel="tag">图形库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%83%E6%B0%8F%E7%AD%9B%E6%B3%95/" rel="tag">埃氏筛法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9E%E8%B7%B5/" rel="tag">实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%AE%E5%88%86/" rel="tag">差分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%9D%E7%BB%B4/" rel="tag">思维</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E8%AE%BA/" rel="tag">数论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97/" rel="tag">日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91/" rel="tag">树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AC%A7%E6%8B%89%E7%AD%9B%E6%B3%95/" rel="tag">欧拉筛法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E5%88%92/" rel="tag">计划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%AA%E5%BF%83/" rel="tag">贪心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%99%E6%8E%92%E5%85%AC%E5%BC%8F/" rel="tag">错排公式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/BFS/" style="font-size: 10px;">BFS</a> <a href="/tags/BeautifulSoup%E5%BA%93/" style="font-size: 10px;">BeautifulSoup库</a> <a href="/tags/CNN/" style="font-size: 10px;">CNN</a> <a href="/tags/CUDA/" style="font-size: 10px;">CUDA</a> <a href="/tags/DFS/" style="font-size: 10px;">DFS</a> <a href="/tags/LaTex/" style="font-size: 10px;">LaTex</a> <a href="/tags/MNIST/" style="font-size: 10px;">MNIST</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/attention/" style="font-size: 10px;">attention</a> <a href="/tags/hdu/" style="font-size: 10px;">hdu</a> <a href="/tags/random%E5%BA%93/" style="font-size: 10px;">random库</a> <a href="/tags/requests%E5%BA%93/" style="font-size: 10px;">requests库</a> <a href="/tags/time%E5%BA%93/" style="font-size: 10px;">time库</a> <a href="/tags/transformer/" style="font-size: 10px;">transformer</a> <a href="/tags/wordcloud%E5%BA%93/" style="font-size: 10px;">wordcloud库</a> <a href="/tags/%E4%BA%8C%E5%88%86/" style="font-size: 10px;">二分</a> <a href="/tags/%E4%BB%8B%E7%BB%8D/" style="font-size: 10px;">介绍</a> <a href="/tags/%E5%89%8D%E7%BC%80%E5%92%8C/" style="font-size: 12.5px;">前缀和</a> <a href="/tags/%E5%8D%9A%E5%BC%88/" style="font-size: 10px;">博弈</a> <a href="/tags/%E5%9B%BE%E5%BD%A2%E5%BA%93/" style="font-size: 10px;">图形库</a> <a href="/tags/%E5%9F%83%E6%B0%8F%E7%AD%9B%E6%B3%95/" style="font-size: 10px;">埃氏筛法</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 17.5px;">基础</a> <a href="/tags/%E5%AE%9E%E8%B7%B5/" style="font-size: 15px;">实践</a> <a href="/tags/%E5%B7%AE%E5%88%86/" style="font-size: 10px;">差分</a> <a href="/tags/%E6%80%9D%E7%BB%B4/" style="font-size: 10px;">思维</a> <a href="/tags/%E6%95%B0%E8%AE%BA/" style="font-size: 10px;">数论</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 10px;">日志</a> <a href="/tags/%E6%A0%91/" style="font-size: 10px;">树</a> <a href="/tags/%E6%AC%A7%E6%8B%89%E7%AD%9B%E6%B3%95/" style="font-size: 10px;">欧拉筛法</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 10px;">测试</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 20px;">笔记</a> <a href="/tags/%E8%AE%A1%E5%88%92/" style="font-size: 10px;">计划</a> <a href="/tags/%E8%B4%AA%E5%BF%83/" style="font-size: 10px;">贪心</a> <a href="/tags/%E9%94%99%E6%8E%92%E5%85%AC%E5%BC%8F/" style="font-size: 10px;">错排公式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/posts/b68f41a0/">算法竞赛进阶指南学习笔记</a>
          </li>
        
          <li>
            <a href="/posts/374e1302/">数学知识</a>
          </li>
        
          <li>
            <a href="/posts/43934f6d/">搜索</a>
          </li>
        
          <li>
            <a href="/posts/b8859ab5/">二维前缀和</a>
          </li>
        
          <li>
            <a href="/posts/fc45aa12/">SQL Sever 学习笔记——图形化创建数据库</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Amonologue<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>